(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"0Y4v":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"table-no-list"}},"7qpD":function(t,e,a){"use strict";a.r(e);var n=a("INw2"),i=a("EFx4");for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("hc7x");var s=a("KHd+"),o=Object(s.a)(i.default,n.a,n.b,!1,null,"7d149013",null);e.default=o.exports},"85XV":function(t,e,a){"use strict";a.r(e),e.default={el:{colorpicker:{confirm:"Εντάξει",clear:"Καθαρισμός"},datepicker:{now:"Τώρα",today:"Σήμερα",cancel:"Ακύρωση",clear:"Καθαρισμός",confirm:"Εντάξει",selectDate:"Επιλέξτε ημέρα",selectTime:"Επιλέξτε ώρα",startDate:"Ημερομηνία Έναρξης",startTime:"Ωρα Έναρξης",endDate:"Ημερομηνία Λήξης",endTime:"Ωρα Λήξης",prevYear:"Προηγούμενο Έτος",nextYear:"Επόμενο Έτος",prevMonth:"Προηγούμενος Μήνας",nextMonth:"Επόμενος Μήνας",year:"Έτος",month1:"Ιανουάριος",month2:"Φεβρουάριος",month3:"Μάρτιος",month4:"Απρίλιος",month5:"Μάιος",month6:"Ιούνιος",month7:"Ιούλιος",month8:"Αύγουστος",month9:"Σεπτέμβριος",month10:"Οκτώβριος",month11:"Νοέμβριος",month12:"Δεκέμβριος",weeks:{sun:"Κυρ",mon:"Δευ",tue:"Τρι",wed:"Τετ",thu:"Πεμ",fri:"Παρ",sat:"Σαβ"},months:{jan:"Ιαν",feb:"Φεβ",mar:"Μαρ",apr:"Απρ",may:"Μαϊ",jun:"Ιουν",jul:"Ιουλ",aug:"Αυγ",sep:"Σεπ",oct:"Οκτ",nov:"Νοε",dec:"Δεκ"}},select:{loading:"Φόρτωση",noMatch:"Δεν βρέθηκαν αποτελέσματα",noData:"Χωρίς δεδομένα",placeholder:"Επιλογή"},cascader:{noMatch:"Δεν βρέθηκαν αποτελέσματα",loading:"Φόρτωση",placeholder:"Επιλογή",noData:"Χωρίς δεδομένα"},pagination:{goto:"Μετάβαση σε",pagesize:"/σελίδα",total:"Σύνολο {total}",pageClassifier:""},messagebox:{title:"Μήνυμα",confirm:"Εντάξει",cancel:"Ακύρωση",error:"Άκυρη εισαγωγή"},upload:{deleteTip:"Πάτησε Διαγραφή για αφαίρεση",delete:"Διαγραφή",preview:"Προεπισκόπηση",continue:"Συνέχεια"},table:{emptyText:"Χωρίς Δεδομένα",confirmFilter:"Επιβεβαίωση",resetFilter:"Επαναφορά",clearFilter:"Όλα",sumText:"Σύνολο"},tree:{emptyText:"Χωρίς Δεδομένα"},transfer:{noMatch:"Δεν βρέθηκαν αποτελέσματα",noData:"Χωρίς δεδομένα",titles:["Λίστα 1","Λίστα 2"],filterPlaceholder:"Αναζήτηση",noCheckedFormat:"{total} Αντικείμενα",hasCheckedFormat:"{checked}/{total} επιλεγμένα"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}}},EFx4:function(t,e,a){"use strict";a.r(e);var n=a("0Y4v"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e.default=i.a},F6Za:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(a("QbLZ")),i=r(a("Mro7"));function r(t){return t&&t.__esModule?t:{default:t}}a("I1+7"),e.default=(0,n.default)({name:"userReview"},i.default)},INw2:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return i}));var n=function(){var t=this.$createElement;this._self._c;return this._m(0)},i=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"table-no-list"},[e("p",[this._v("暂无数据")])])}]},Kvoi:function(t,e,a){},Mro7:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(a("4gYi")),i=o(a("rWG0")),r=o(a("7qpD")),s=o(a("VVfg"));o(a("85XV"));function o(t){return t&&t.__esModule?t:{default:t}}e.default={data:function(){return{tableData:[],multipleSelection:[],visible:!1,currentPaga:1,total:0,pageCount:1,btnLoading:!1,extendedAudit:[],gridData:[],visibleExtends:[]}},methods:{handleSelectionChange:function(t){this.multipleSelection=t},singleOperation:function(t,e,a){var n=this;"pass"===t?this.editUser(e,0):"no"===t?this.$MessageBox.prompt("","提示",{confirmButtonText:"提交",cancelButtonText:"取消",inputPlaceholder:"请输入否决原因"}).then((function(t){n.editUser(e,3,t.value)})).catch((function(t){})):"del"===t&&this.deleteUser(e)},allOperation:function(t){var e=this,a=[];"pass"===t?(this.btnLoading=!0,this.multipleSelection.length<1?(this.$message.warning("请选择审核用户"),this.btnLoading=!1):(this.multipleSelection.forEach((function(t){a.push({attributes:{id:t._data.id,status:"0"}})})),this.patchEditUser(a))):"no"===t?this.multipleSelection.length<1?(this.$message.warning("请选择否决用户"),this.btnLoading=!1):this.$MessageBox.prompt("","提示",{confirmButtonText:"提交",cancelButtonText:"取消",inputPlaceholder:"请输入否决原因"}).then((function(t){e.multipleSelection.forEach((function(e){a.push({attributes:{id:e._data.id,status:"1",refuse_message:t.value}})})),e.patchEditUser(a)})).catch((function(t){})):"del"===t&&(this.multipleSelection.length<1?(this.$message.warning("请选择删除用户"),this.btnLoading=!1):(this.multipleSelection.forEach((function(t){a.push(t._data.id)})),this.patchDeleteUser(a),this.visible=!1))},handleCurrentChange:function(t){document.getElementsByClassName("index-main-con__main")[0].scrollTop=0,this.currentPaga=t,this.getUserList(t)},formatDate:function(t){return this.$dayjs(t).format("YYYY-MM-DD HH:mm")},getUserList:function(t){var e=this;this.appFetch({url:"users",method:"get",data:{"filter[status]":"mod","page[number]":t,"page[size]":10}}).then((function(t){e.total=t.meta.total,e.pageCount=t.meta.pageCount,e.visibleExtends=[],t.readdata.forEach((function(t,a){e.visibleExtends.push({dialogTableVisible:!1}),t.extFields.length>0&&t.extFields.forEach((function(t,e){t._data.type>1&&t._data.fields_ext&&(t._data.fields_ext=JSON.parse(t._data.fields_ext))}))})),e.tableData=t.readdata}))},dialogTableVisibleFun:function(t){this.visibleExtends[t.$index].dialogTableVisible=!0},editUser:function(t,e,a){var n=this;this.appFetch({url:"users",method:"PATCH",splice:"/"+t,data:{data:{attributes:{status:e,refuse_message:a}}}}).then((function(t){n.btnLoading=!1,t.errors?n.$message.error(t.errors[0].code):(n.$message({message:"操作成功",type:"success"}),n.getUserList(Number(s.default.getLItem("currentPag"))||1))})).catch((function(t){}))},patchEditUser:function(t){var e=this;this.appFetch({method:"PATCH",url:"users",data:{data:t}}).then((function(t){e.btnLoading=!1,t.errors?e.$message.error(t.errors[0].code):(e.$message({message:"操作成功",type:"success"}),e.getUserList(Number(s.default.getLItem("currentPag"))||1))})).catch((function(t){}))},patchDeleteUser:function(t){var e=this;this.appFetch({url:"users",method:"PATCH",splice:"/"+t,data:{data:{attributes:{id:t,status:"4"}}}}).then((function(t){t.errors?e.$message.error(t.errors[0].code):(e.$message({message:"操作成功",type:"success"}),e.getUserList(Number(s.default.getLItem("currentPag"))||1))})).catch((function(t){}))},deleteUser:function(t){var e=this;this.appFetch({url:"users",method:"PATCH",splice:"/"+t,data:{data:{attributes:{status:"4"}}}}).then((function(t){t.errors?e.$message.error(t.errors[0].code):(e.$message({message:"操作成功",type:"success"}),e.getUserList(Number(s.default.getLItem("currentPag"))||1))})).catch((function(t){}))},getCreated:function(t){t?this.getUserList(1):this.getUserList(Number(s.default.getLItem("currentPag"))||1)},auditQuery:function(){var t=this;this.appFetch({url:"signInFields",method:"get",data:{}}).then((function(e){t.extendedAudit=[],e.readdata.forEach((function(e){1==e._data.status&&t.extendedAudit.push(e)}))}))},optionFun:function(t){var e="";return t.options?t.options.forEach((function(t){t.checked&&(e+=t.value+" ")})):t.forEach((function(t){t.checked&&(e+=t.value+" ")})),e},gridDataFun:function(t){return t.row.extFields}},created:function(){this.auditQuery()},beforeRouteEnter:function(t,e,a){a((function(a){t.name!==e.name&&null!==e.name?a.getCreated(!0):a.getCreated(!1)}))},components:{Card:n.default,Page:i.default,tableNoList:r.default}}},ecLA:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return i}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-review-box"},[a("div",{staticClass:"user-review-table"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{label:"编号",prop:"_data.id",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"_data.username",label:"用户名",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{width:"200",label:"注册时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.formatDate(e.row._data.createdAt)))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"_data.originalMobile",label:"手机号",width:"150"}}),t._v(" "),a("el-table-column",{key:t.index,attrs:{width:"150",label:"扩展字段"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.dialogTableVisibleFun(e)}}},[t._v("查看")]),t._v(" "),a("el-dialog",{attrs:{title:"扩展信息",visible:t.visibleExtends[e.$index].dialogTableVisible},on:{"update:visible":function(a){return t.$set(t.visibleExtends[e.$index],"dialogTableVisible",a)}}},[a("el-table",{ref:"multipleTable",staticClass:"user-review-table__box",attrs:{data:t.gridDataFun(e),"tooltip-effect":"dark","max-height":"400",border:!0},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{staticClass:"user-review-table__trbox",attrs:{label:"字段名称",prop:"_data.name",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"user-review-table__tdbox"},[t._v(t._s(e.row._data.name))])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"字段信息",width:"571"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"user-review-table__exdent"},[0===e.row._data.type||1===e.row._data.type?a("p",[t._v("\n                            "+t._s(e.row._data.fields_ext)+"\n                        ")]):t._e(),t._v(" "),2===e.row._data.type||3===e.row._data.type?a("p",[t._v("\n                            "+t._s(t.optionFun(e.row._data.fields_ext))+"\n                        ")]):t._e(),t._v(" "),4===e.row._data.type||5===e.row._data.type?a("div",t._l(e.row._data.fields_ext,(function(e,n){return a("p",{key:n},[a("a",{attrs:{href:e.url,target:"_blank"}},[t._v(t._s(e.name))])])})),0):t._e()])]}}],null,!0)})],1)],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"230"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.singleOperation("pass",e.row._data.id,e)}}},[t._v("通过")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.singleOperation("no",e.row._data.id,e)}}},[t._v("否决")]),t._v(" "),a("el-popover",{ref:"popover-"+e.$index,attrs:{width:"100",placement:"top"}},[a("p",[t._v("确定删除该项吗？")]),t._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"10PX 0 0 0"}},[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){e._self.$refs["popover-"+e.$index].doClose()}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){t.singleOperation("del",e.row._data.id),e._self.$refs["popover-"+e.$index].doClose()}}},[t._v("确定")])],1)])]}}])})],1),t._v(" "),t.pageCount>1?a("Page",{attrs:{"current-page":t.currentPaga,"page-size":10,total:t.total},on:{"current-change":t.handleCurrentChange}}):t._e()],1),t._v(" "),a("Card",{staticClass:"footer-btn"},[a("el-button",{attrs:{type:"primary",loading:t.btnLoading},on:{click:function(e){return t.allOperation("pass")}}},[t._v("通过")]),t._v(" "),a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.allOperation("no")}}},[t._v("否决")]),t._v(" "),a("el-popover",{attrs:{placement:"top",width:"160"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("p",[t._v("确定删除选中的用户吗？")]),t._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"10PX 0 0 0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.visible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.allOperation("del")}}},[t._v("确认")])],1)])],1)],1)},i=[]},esgl:function(t,e,a){"use strict";a.r(e);var n=a("F6Za"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e.default=i.a},hc7x:function(t,e,a){"use strict";a("Kvoi")},jhKW:function(t,e,a){"use strict";a.r(e);var n=a("ecLA"),i=a("esgl");for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);var s=a("KHd+"),o=Object(s.a)(i.default,n.a,n.b,!1,null,null,null);e.default=o.exports}}]);