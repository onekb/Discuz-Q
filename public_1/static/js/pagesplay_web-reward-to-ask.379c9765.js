(window.webpackJsonp=window.webpackJsonp||[]).push([["pagesplay_web-reward-to-ask"],{"04fe":function(t,e,i){"use strict";var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.readCategories=function(){return c.apply(this,arguments)},i("96cf");var n=a(i("5530")),o=a(i("15fd")),r=a(i("1da1")),s={};function c(){return(c=(0,r.default)(regeneratorRuntime.mark((function t(){var e,i,a,r,c,u,d,p,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:{},t.prev=1,i=e.params,a=void 0===i?{}:i,r=e.data,c=void 0===r?{}:r,u=(0,o.default)(e,["params","data"]),d=(0,n.default)((0,n.default)({url:"/api/categories.v2",method:"GET",params:a,data:c},u),{},{validateRules:s}),t.next=6,this.http(d);case 6:return p=t.sent,t.abrupt("return",p);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",t.t0);case 13:case"end":return t.stop()}}),t,this,[[1,10]])})))).apply(this,arguments)}},"0575":function(t,e,i){"use strict";var a=i("2812");i.d(e,"a",(function(){return a.a})),i.d(e,"b",(function(){return a.b})),i.d(e,"c",(function(){return a.c}))},"0a1d":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={url:"",method:"GET",dataType:"json",timeout:3e4,isValidate:!1,validateRules:null}},1708:function(t,e,i){"use strict";var a=i("4ea4").default,n=a(i("13ea")),o=a(i("9b02"));t.exports=function(t){return{data:function(){return{hasPermission:null}},watch:{hasPermission:function(t,e){!1===t&&null===e&&uni.redirectTo({url:"/pages/home/index"})}},created:function(){var t=this.$store.getters["jv/get"]("forums/1");(0,n.default)(t)?uni.$on("inited",this.checkHasPermission):this.checkHasPermission(t)},beforeDestroy:function(){uni.$off("inited",this.checkHasPermission)},methods:{checkHasPermission:function(e){this.hasPermission=(0,o.default)(e,t)}}}}},"245f":function(t,e,i){"use strict";(function(e){var a=i("4ea4").default,n=a(i("6f74")),o=i("b95e"),r=a(i("4c82"));t.exports={mixins:[n.default,r.default],methods:{getForum:function(){var t=this;this.$store.dispatch("jv/get",["forum",{params:{include:"users"}}]).then((function(e){e&&(t.forum=e)}))},jump2PhoneLoginPage:function(){uni.redirectTo({url:"/pages/user/phone-login"})},jump2PhoneLoginRegisterPage:function(){uni.redirectTo({url:"/pages/user/phone-login-register"})},jump2LoginPage:function(){uni.navigateTo({url:"/pages/user/login"})},jump2RegisterPage:function(){uni.redirectTo({url:"/pages/user/register"})},jump2RegisterExtendPage:function(){uni.redirectTo({url:"/pages/user/supple-mentary"})},jump2LoginBindPage:function(){uni.redirectTo({url:"/pages/user/login-bind"})},jump2RegisterBindPage:function(){uni.redirectTo({url:"/pages/user/register-bind"})},jump2LoginBindPhonePage:function(){uni.redirectTo({url:"/pages/user/login-bind-phone"})},jump2RegisterBindPhonePage:function(){uni.redirectTo({url:"/pages/user/register-bind-phone"})},jump2findpwdPage:function(){uni.navigateTo({url:"/pages/modify/findpwd?pas=reset_pwd"})},mpLoginMode:function(){this.forums&&this.forums.set_reg&&0===this.forums.set_reg.register_type&&this.jump2LoginPage(),this.forums&&this.forums.set_reg&&1===this.forums.set_reg.register_type&&this.jump2PhoneLoginRegisterPage(),this.forums&&this.forums.set_reg&&2===this.forums.set_reg.register_type&&(uni.setStorageSync("register",1),uni.setStorageSync("isSend",!0),this.$store.getters["session/get"]("auth").open())},h5LoginMode:function(){r.default.isWeixin().isWeixin?(this.forums&&this.forums.set_reg&&0===this.forums.set_reg.register_type&&uni.navigateTo({url:"/pages/user/login"}),this.forums&&this.forums.set_reg&&1===this.forums.set_reg.register_type&&this.jump2PhoneLoginRegisterPage(),this.forums&&this.forums.set_reg&&2===this.forums.set_reg.register_type&&(uni.setStorageSync("register",1),this.$store.dispatch("session/wxh5Login"))):(this.forums&&this.forums.set_reg&&0===this.forums.set_reg.register_type&&uni.navigateTo({url:"/pages/user/login"}),this.forums&&this.forums.set_reg&&1===this.forums.set_reg.register_type&&this.jump2PhoneLoginRegisterPage(),this.forums&&this.forums.set_reg&&2===this.forums.set_reg.register_type&&uni.navigateTo({url:"/pages/user/login"}))},refreshmpParams:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};t()},mpLogin:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;uni.setStorageSync("register",t),uni.setStorageSync("isSend",!0),this.$store.getters["session/get"]("auth").open()},wxh5Login:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;uni.setStorageSync("register",t),uni.setStorageSync("rebind",e),uni.setStorageSync("h5_wechat_login",1),this.$store.dispatch("session/wxh5Login")},getLoginParams:function(t,e){var i=t;if(""===t.data.attributes.username)uni.showToast({icon:"none",title:this.i18n.t("user.usernameEmpty"),duration:2e3});else if(""===t.data.attributes.password)uni.showToast({icon:"none",title:this.i18n.t("user.passwordEmpty"),duration:2e3});else{var a=uni.getStorageSync("token");""!==a&&(i.data.attributes.token=a),this.login(i,e)}},getLoginBindParams:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.refreshmpParams();var a=t;if(""===t.data.attributes.username)uni.showToast({icon:"none",title:this.i18n.t("user.usernameEmpty"),duration:2e3});else if(""===t.data.attributes.password)uni.showToast({icon:"none",title:this.i18n.t("user.passwordEmpty"),duration:2e3});else{1===i&&(a.data.attributes.rebind=1);var n=uni.getStorageSync("token");""!==n&&(a.data.attributes.token=n),this.login(a,e)}},login:function(t,i){var a=this;this.$store.dispatch("session/h5Login",t).then((function(t){if(t&&t.data&&t.data.data&&t.data.data.id&&(a.logind(),a.$store.dispatch("jv/get",["forum",{params:{include:"users"}}]).then((function(t){t&&t.set_site&&t.set_site.site_mode!==o.SITE_PAY&&uni.getStorage({key:"page",success:function(t){uni.redirectTo({url:t.data})}}),t&&t.set_site&&t.set_site.site_mode===o.SITE_PAY&&a.user&&!a.user.paid&&uni.redirectTo({url:"/pages/site/info"})})),uni.showToast({title:i,duration:2e3})),t&&t.data&&t.data.errors){if("401"===t.data.errors[0].status||"402"===t.data.errors[0].status||"500"===t.data.errors[0].status){var e=a.i18n.t("core.".concat(t.data.errors[0].code));uni.showToast({icon:"none",title:e,duration:2e3})}if("403"===t.data.errors[0].status||"422"===t.data.errors[0].status){var n=a.i18n.t("core.".concat(t.data.errors[0].code))||a.i18n.t(t.data.errors[0].detail[0]);uni.showToast({icon:"none",title:n,duration:2e3})}}})).catch((function(t){return e.log(t)}))}}}}).call(this,i("5a52").default)},"25d8":function(t,e,i){"use strict";var a=i("4ea4").default;i("99af"),i("c975"),i("ac1f"),i("1276");var n=a(i("b469"));t.exports={mixins:[n.default],methods:{getPosition:function(){var t=this.forums.lbs.qq_lbs_key;new qq.maps.Geolocation(t,"myapp").getLocation(this.showPosition,this.errorPosition,{timeout:6e3})},showPosition:function(t){var e=this.forums.lbs.qq_lbs_key,i="".concat(t.lat,",").concat(t.lng),a=window.location.href,n=a.indexOf("&name");-1!==n&&(a=a.substr(0,n));var o=encodeURIComponent(a);window.location.href="https://apis.map.qq.com/tools/locpicker?search=1&type=0&backurl=".concat(o,"&key=").concat(e,"&referer=myapp&coord=").concat(i)},errorPosition:function(){this.getPosition()},getUrl:function(){var t=/iPad|iPhone|iPod/.test(navigator.userAgent),e=window.location.href.split("#")[0];return t&&window.entryUrl&&!/wechatdevtools/.test(navigator.userAgent)&&(e=window.entryUrl),e}}}},"26d0":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("ac1f"),i("5319"),i("a9e3");var a,n=i("b95e"),o=i("f61d"),r=n.DISCUZ_REQUEST_HOST.replace(/\/$/,""),s=(0,o.apiIns)({baseURL:r});s.http.interceptors.response.use((function(t){var e=t.data,i=e||{},n=i.Code,r=i.Message;switch(a=getApp(),Number(n)){case o.RESPONSE_CODE.UNAUTHORIZED:a.$store.dispatch("forum/setError",{code:"type_401",status:500});break;case o.RESPONSE_CODE.SUCCESS:break;default:uni.showToast({icon:"none",title:r})}return e}));var c=s;e.default=c},2812:function(t,e,i){"use strict";(function(t){var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));try{a={quiPage:i("29c4").default,quiIcon:i("895d").default,quiEmoji:i("725e").default,quiUploader:i("c012").default,uniPopup:i("1c89").default,quiCellItem:i("e0ca").default,uSwitch:i("1504").default,quiPay:i("35fd").default,quiButton:i("8397").default,quiToast:i("2039").default,quiUploadFile:i("500f").default}}catch(e){if(-1===e.message.indexOf("Cannot find module")||-1===e.message.indexOf(".vue"))throw e;t.error(e.message),t.error("1. 排查组件名称拼写是否正确"),t.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),t.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("qui-page",{attrs:{"data-qui-theme":t.theme}},[t.loadStatus?i("v-uni-view",{staticClass:"post-box"},[1!==t.type?i("v-uni-view",[i("v-uni-view",{staticClass:"post-box__hd"},[i("v-uni-view",{staticClass:"post-box__hd-l"},[i("qui-icon",{staticClass:"post-box__hd-l__icon",attrs:{name:"icon-expression",size:"34",color:t.emojiShow?"#EA3D5A":"#999999"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.emojiclick.apply(void 0,arguments)}}}),i("qui-icon",{staticClass:"post-box__hd-l__icon",attrs:{name:"icon-call",size:"34",color:"#999999"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.callClick.apply(void 0,arguments)}}}),i("qui-icon",{staticClass:"post-box__hd-l__icon",attrs:{name:"icon-wei",size:"34",color:"#999999"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.topicPage.apply(void 0,arguments)}}})],1),5!==t.type?i("v-uni-text",{staticClass:"post-box__hd-r"},[t._v(t._s(t.textAreaValue.length<=t.textAreaLength?t.i18n.t("discuzq.post.note",{num:t.textAreaLength-t.textAreaValue.length}):t.i18n.t("discuzq.post.exceed",{num:t.textAreaValue.length-t.textAreaLength})))]):t._e(),5===t.type?i("v-uni-text",{staticClass:"post-box__hd-r"},[t._v(t._s(t.textAreaValue.length<=t.textAreaLength?t.i18n.t("discuzq.post.note",{num:t.textAnswerLength-t.textAreaValue.length}):t.i18n.t("discuzq.post.exceed",{num:t.textAreaValue.length-t.textAnswerLength})))]):t._e()],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.emojiShow,expression:"emojiShow"}],staticClass:"emoji-bd"},[i("qui-emoji",{attrs:{position:"absolute",top:"20rpx","border-radius":"10rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getEmojiClick.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"post-box__con"},[i("v-uni-textarea",{directives:[{name:"show",rawName:"v-show",value:t.textShow,expression:"textShow"}],ref:"textarea",staticClass:"post-box__con-text",attrs:{id:"textarea",placeholder:5!==t.type?t.i18n.t("discuzq.post.placeholder"):t.i18n.t("discuzq.post.placeholderQuestion"),"placeholder-class":"textarea-placeholder","auto-height":"true","show-confirm-bar":t.barStatus,"adjust-position":!0,"cursor-spacing":"30",cursor:"cursor",maxlength:49999,focus:1!==t.type},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.contBlur.apply(void 0,arguments)},focus:function(e){arguments[0]=e=t.$handleEvent(e),t.focusEvent.apply(void 0,arguments)}},model:{value:t.textAreaValue,callback:function(e){t.textAreaValue=e},expression:"textAreaValue"}}),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!t.textShow,expression:"!textShow"}],staticClass:"post-box__con-text post-box__con-text--static"},[i("v-uni-text",{staticClass:"text-cover"},[t._v(t._s(t.textAreaValue))])],1)],1)],1):i("v-uni-view",[i("v-uni-view",{ref:"vditor"},[i("v-uni-view",{staticClass:"post-box__hd"},[i("v-uni-view",{staticClass:"post-box__hd-l"},[i("qui-icon",{staticClass:"post-box__hd-l__icon",attrs:{name:"icon-expression",size:"40",color:t.emojiShow?"#1878F3":"#777"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.emojiclick.apply(void 0,arguments)}}}),i("qui-icon",{staticClass:"post-box__hd-l__icon",attrs:{name:"icon-call",size:"40",color:"#777"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.callClick.apply(void 0,arguments)}}}),i("qui-icon",{staticClass:"post-box__hd-l__icon",attrs:{name:"icon-wei",size:"40",color:"#777"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.topicPage.apply(void 0,arguments)}}})],1),i("v-uni-text",{staticClass:"post-box__hd-r"},[t._v(t._s(t.textAreaValue.length<=t.textAreaLength?t.i18n.t("discuzq.post.note",{num:t.textAnswerLength-t.textAreaValue.length}):t.i18n.t("discuzq.post.exceed",{num:t.textAreaValue.length-t.textAnswerLength})))])],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.emojiShow,expression:"emojiShow"}],staticClass:"emoji-bd"},[i("qui-emoji",{attrs:{position:"absolute",top:"20rpx","border-radius":"10rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getEmojiClick.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"post-box__con"},[i("v-uni-textarea",{directives:[{name:"show",rawName:"v-show",value:t.textShow,expression:"textShow"}],ref:"textarea",staticClass:"post-box__con-text",attrs:{id:"textarea",placeholder:5!==t.type?t.i18n.t("discuzq.post.placeholder"):t.i18n.t("discuzq.post.placeholderQuestion"),"placeholder-class":"textarea-placeholder","auto-height":"true","show-confirm-bar":t.barStatus,"adjust-position":!0,"cursor-spacing":"30",cursor:"cursor",maxlength:49999,focus:1!==t.type},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.contBlur.apply(void 0,arguments)},focus:function(e){arguments[0]=e=t.$handleEvent(e),t.focusEvent.apply(void 0,arguments)}},model:{value:t.textAreaValue,callback:function(e){t.textAreaValue=e},expression:"textAreaValue"}}),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!t.textShow,expression:"!textShow"}],staticClass:"post-box__con-text post-box__con-text--static"},[i("v-uni-text",{staticClass:"text-cover"},[t._v(t._s(t.textAreaValue))])],1)],1)],1)],1),i("qui-uploader",{ref:"upload",staticStyle:{"padding-top":"0"},attrs:{url:t.url+"api/attachments","form-data":t.formData,"file-preview":t.filePreview,name:"file","async-clear":!0},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadChange.apply(void 0,arguments)},clear:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadClear.apply(void 0,arguments)},uploadClick:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadClick.apply(void 0,arguments)}}}),i("uni-popup",{ref:"deletePopup",attrs:{type:"center"}},[i("uni-popup-dialog",{attrs:{type:"warn",content:t.deleteTip,"before-close":!0},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.handleClickCancel.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.handleClickOk.apply(void 0,arguments)}}})],1),i("v-uni-view",[i("qui-cell-item",{class:t.price>0?"cell-item-right-text":"",attrs:{title:"悬赏金额",addon:t.showPrice,arrow:!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cellClick("pay")}}})],1),i("v-uni-view",[i("v-uni-view",{staticClass:"endTimes"},[i("onwTimePicker",{attrs:{"time-value":t.timeValue?t.timeValue:"悬赏结束时间"},on:{getTimes:function(e){arguments[0]=e=t.$handleEvent(e),t.getTimes.apply(void 0,arguments)},setTimes:function(e){arguments[0]=e=t.$handleEvent(e),t.setTimes.apply(void 0,arguments)}}}),i("qui-icon",{attrs:{name:"icon-folding-r",size:"26",color:"#ddd"}})],1)],1),t.anonymity_show&&"edit"!==t.operating?i("v-uni-view",{staticClass:"uni-list-cell uni-list-cell-pd"},[i("v-uni-view",{staticClass:"uni-list-cell-db"},[t._v(t._s(t.i18n.t("discuzq.post.anonymity")))]),i("u-switch",{attrs:{"active-color":"#1E78F3"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.changeCheck.apply(void 0,arguments)}},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}})],1):t._e(),t.geographical_location?i("v-uni-view",{staticClass:"post-box__position"},[i("qui-cell-item",{attrs:{arrow:!0,"slot-left":!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.choosePosition.apply(void 0,arguments)}}},[i("v-uni-view",[i("v-uni-text",{staticStyle:{color:"var(--qui-FC-777)"}},[t._v(t._s(t.currentPosition&&t.currentPosition.location?t.currentPosition.location:t.i18n.t("discuzq.post.addPosition")))])],1)],1),t.currentPosition&&t.currentPosition.location?i("qui-icon",{attrs:{name:"icon-close1",size:"32",color:"#ccc"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clearPosition.apply(void 0,arguments)}}}):t._e()],1):t._e(),t.payShowStatus?i("v-uni-view",[i("qui-pay",{ref:"payShow",attrs:{"pay-type":t.payTypeText,money:t.priceAsk,"wallet-status":t.user.canWalletPay,balance:Number(t.user.walletBalance),"pay-password":t.pwdVal,"pay-type-data":t.payTypeData,"to-name":t.beUserName},on:{paysureShow:function(e){arguments[0]=e=t.$handleEvent(e),t.paysureShow.apply(void 0,arguments)},onInput:function(e){arguments[0]=e=t.$handleEvent(e),t.onInput.apply(void 0,arguments)},radioChange:function(e){arguments[0]=e=t.$handleEvent(e),t.radioChange.apply(void 0,arguments)}}})],1):t._e(),i("uni-popup",{ref:"lookPayPopup",attrs:{type:"bottom"}},[i("v-uni-view",{staticClass:"popup-share"},[i("v-uni-view",{staticClass:"pay-type",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.choicePayType(0)}}},[t._v(t._s(t.i18n.t("discuzq.post.TheContentAndTheAccessoriesIsFree")))]),1===t.type&&t.canUploadAttachment?i("v-uni-view",{staticClass:"pay-type",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.choicePayType(1)}}},[t._v(t._s(t.i18n.t("discuzq.post.TheContentIsFreeAndTheAccessoriesArePaid")))]):t._e(),i("v-uni-view",{staticClass:"pay-type",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.choicePayType(2)}}},[t._v(t._s(t.i18n.t("discuzq.post.TheContentAndTheAccessoriesIsPaid")))]),i("v-uni-view",{staticClass:"popup-share-content-space"}),i("v-uni-text",{staticClass:"popup-share-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancelLookPay()}}},[t._v(t._s(t.i18n.t("discuzq.post.cancel")))])],1)],1),i("v-uni-view",{staticClass:"post-box__ft-categories"},t._l(t.allCategories,(function(e,a){return i("qui-button",{key:e._jv.id,class:Number(e._jv.id)===Number(t.categoryId)?"cateActive":"",attrs:{type:Number(e._jv.id)===Number(t.categoryId)?"primary":"",plain:Number(e._jv.id)===Number(t.categoryId)},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.checkClass(e,a,e._jv.id)}}},[t._v(t._s(e.name))])})),1),""!=t.secondallcategories?i("v-uni-view",{staticClass:"post-box__ft-categories post-box__img"},t._l(t.secondallcategories,(function(e,a){return i("qui-button",{key:e.id,class:Number(e.id)===Number(t.two_categoryId)?"cateActive":"",attrs:{type:Number(e.id)===Number(t.two_categoryId)?"primary":"",plain:Number(e.id)===Number(t.two_categoryId)},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.checkClassing(e,a,e.id)}}},[t._v(t._s(e.name))])})),1):t._e(),i("v-uni-view",{staticClass:"bottom_button"},[i("qui-button",{attrs:{loading:t.postLoading,type:"primary",size:"smalls",id:"TencentCaptcha","data-appid":t.forums.qcloud&&t.forums.qcloud.qcloud_captcha_app_id||"",disabled:t.textAreaValue.length>t.textAreaLength},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.postClick.apply(void 0,arguments)}}},[t._v(t._s(t.i18n.t("discuzq.post.post")))]),i("qui-button",{attrs:{loading:t.postLoading,type:"primary",size:"smalls",id:"TencentCaptcha","data-appid":t.forums.qcloud&&t.forums.qcloud.qcloud_captcha_app_id||"",disabled:t.textAreaValue.length>t.textAreaLength},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toDraftsing.apply(void 0,arguments)}}},[t._v("保存草稿箱")])],1),i("uni-popup",{ref:"popupBtm",attrs:{type:"bottom"}},[i("v-uni-view",{staticClass:"popup-share"},[i("v-uni-view",{staticClass:"popup-share-content"},[i("v-uni-text",{staticClass:"popup-title"},[t._v("请设置悬赏金额")]),i("v-uni-view",{staticClass:"popup-content-btn"},t._l(t.payNum,(function(e,a){return i("qui-button",{key:a,staticClass:"popup-btn",attrs:{type:t.payNumCheck.length>0&&t.payNumCheck[0].name===e.name?"myradcolor":"post",plain:!0,size:"post"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.moneyClick(a)}}},[t._v(t._s(e.name))])})),1),"word"===t.setType?i("v-uni-view",{staticClass:"popup-content-btn"},t._l(t.freepercentage,(function(e,a){return i("qui-button",{key:a,staticClass:"popup-btn",attrs:{type:t.freewords.length>0&&t.freewords[0].name===e.name?"primary":"post",plain:!0,size:"post"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.percentageClick(a)}}},[t._v(t._s(e.name))])})),1):t._e()],1),i("v-uni-view",{staticClass:"popup-share-content-space"}),i("v-uni-text",{staticClass:"popup-share-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel()}}},[t._v(t._s(t.i18n.t("discuzq.post.cancel")))])],1)],1),t.popupStatus?i("v-uni-view",[i("uni-popup",{ref:"popup",attrs:{type:"center"}},[i("v-uni-view",{staticClass:"popup-dialog"},[i("v-uni-view",{staticClass:"popup-dialog__top"},[i("v-uni-text",[t._v("输入悬赏金额")])],1),i("v-uni-view",{staticClass:"popup-dialog__cont"},[i("qui-icon",{staticClass:"popup-dialog__cont-rmb",attrs:{name:"icon-rmb",size:"40"}}),i("v-uni-input",{staticClass:"popup-dialog__cont-input",attrs:{type:"digit",placeholder:"0.0",maxlength:t.maxLength,focus:"pay"===t.setType},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.checkNum.apply(void 0,arguments)}},model:{value:t.inputPrice,callback:function(e){t.inputPrice=e},expression:"inputPrice"}})],1),i("v-uni-view",{staticClass:"popup-dialog__ft"},[i("v-uni-button",{staticClass:"popup-btn--close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.diaLogClose.apply(void 0,arguments)}}},[t._v(t._s(t.i18n.t("discuzq.close")))]),i("v-uni-button",{staticClass:"popup-btn--ok",class:t.inputPrice>0?"popup-btn--ok--blue":"",attrs:{disabled:""===t.inputPrice},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.diaLogOk.apply(void 0,arguments)}}},[t._v(t._s(t.i18n.t("discuzq.ok")))])],1)],1)],1)],1):t._e(),i("uni-popup",{ref:"wechatPopup",attrs:{type:"center"}},[i("uni-popup-dialog",{attrs:{type:"warn",content:t.wechatTip,"before-close":!0},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.handleWechatClickCancel.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.handleWechatClickOk.apply(void 0,arguments)}}})],1),i("qui-toast",{ref:"toast"}),i("qui-upload-file",{directives:[{name:"show",rawName:"v-show",value:1===t.type&&5!==t.type&&t.forums.other&&t.forums.other.can_upload_attachments,expression:"type === 1 && type !== 5 && forums.other && forums.other.can_upload_attachments"}],ref:"uploadFiles",attrs:{url:t.url+"api/attachments",header:t.header,"attachment-list":t.attachmentList,"file-format":t.forums.set_attach&&t.forums.set_attach.support_file_ext,"file-size":t.forums.set_attach&&t.forums.set_attach.support_max_size},on:{deleteItem:function(e){arguments[0]=e=t.$handleEvent(e),t.deleteFile.apply(void 0,arguments)}}})],1):t._e()],1)},o=[]}).call(this,i("5a52").default)},"2df5":function(t,e,i){"use strict";var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.createPosts=function(){return c.apply(this,arguments)},i("96cf");var n=a(i("5530")),o=a(i("15fd")),r=a(i("1da1")),s={data:{type:"object",fields:{relationships:{type:"object",fields:{thread:{type:"object",fields:{data:{type:"object",required:!0,fields:{id:{type:"number",required:!0}}}}}}},attributes:{type:"object",fields:{replyId:{type:"number"},content:{type:"string",required:!0},commentPostId:{type:"number"},commentUserId:{type:"number"}}}}}};function c(){return(c=(0,r.default)(regeneratorRuntime.mark((function t(){var e,i,a,r,c,u,d,p,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:{},t.prev=1,i=e.params,a=void 0===i?{}:i,r=e.data,c=void 0===r?{}:r,u=(0,o.default)(e,["params","data"]),d=(0,n.default)((0,n.default)({url:"/api/posts.v2",method:"POST",params:a,data:c},u),{},{validateRules:s}),t.next=6,this.http(d);case 6:return p=t.sent,t.abrupt("return",p);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",handleError(t.t0));case 13:case"end":return t.stop()}}),t,this,[[1,10]])})))).apply(this,arguments)}},"2e6a":function(t,e,i){"use strict";var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.readCommentList=function(){return c.apply(this,arguments)},i("96cf");var n=a(i("5530")),o=a(i("15fd")),r=a(i("1da1")),s={page:{type:"number"},perPage:{type:"number"}};function c(){return(c=(0,r.default)(regeneratorRuntime.mark((function t(){var e,i,a,r,c,u,d,p,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:{},t.prev=1,i=e.params,a=void 0===i?{}:i,r=e.data,c=void 0===r?{}:r,u=(0,o.default)(e,["params","data"]),d=(0,n.default)((0,n.default)({url:"/api/posts.v2",method:"GET",params:a,data:c},u),{},{validateRules:s}),t.next=6,this.http(d);case 6:return p=t.sent,t.abrupt("return",p);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",t.t0);case 13:case"end":return t.stop()}}),t,this,[[1,10]])})))).apply(this,arguments)}},"368d":function(t,e,i){t.exports=i.p+"static/img/msg-warning.f35ce51f.svg"},4661:function(t,e,i){"use strict";var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.readStickList=function(){return c.apply(this,arguments)},i("96cf");var n=a(i("5530")),o=a(i("15fd")),r=a(i("1da1")),s={categoryId:{type:"array"}};function c(){return(c=(0,r.default)(regeneratorRuntime.mark((function t(){var e,i,a,r,c,u,d,p,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:{},t.prev=1,i=e.params,a=void 0===i?{}:i,r=e.data,c=void 0===r?{}:r,u=(0,o.default)(e,["params","data"]),d=(0,n.default)((0,n.default)({url:"/api/sticks.v2",method:"GET",params:a,data:c},u),{},{validateRules:s}),t.next=6,this.http(d);case 6:return p=t.sent,t.abrupt("return",p);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",t.t0);case 13:case"end":return t.stop()}}),t,this,[[1,10]])})))).apply(this,arguments)}},5458:function(t,e,i){"use strict";(function(t){var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.updatePosts=function(){return c.apply(this,arguments)},i("96cf");var n=a(i("5530")),o=a(i("15fd")),r=a(i("1da1")),s={data:{type:"object",required:!0,fields:{attributes:{type:"object",required:!0,fields:{}}}},pid:{type:"number",required:!0}};function c(){return(c=(0,r.default)(regeneratorRuntime.mark((function e(){var i,a,r,c,u,d,p,l,h=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=h.length>0&&void 0!==h[0]?h[0]:{},e.prev=1,a=i.params,r=void 0===a?{}:a,c=i.data,u=void 0===c?{}:c,d=(0,o.default)(i,["params","data"]),t.log("op",u),p=(0,n.default)((0,n.default)({url:"/api/posts.update.v2",method:"POST",params:r,data:u},d),{},{validateRules:s}),e.next=7,this.http(p);case 7:return l=e.sent,e.abrupt("return",l);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",handleError(e.t0));case 14:case"end":return e.stop()}}),e,this,[[1,11]])})))).apply(this,arguments)}}).call(this,i("5a52").default)},6354:function(module,exports,__webpack_require__){var _objectSpread=__webpack_require__("ded3").default,_typeof2=__webpack_require__("7037").default;__webpack_require__("a4d3"),__webpack_require__("e01a"),__webpack_require__("d3b7"),__webpack_require__("944a"),__webpack_require__("0c47"),__webpack_require__("23dc"),__webpack_require__("ac1f"),__webpack_require__("841c"),__webpack_require__("c975"),__webpack_require__("1276"),__webpack_require__("99af"),__webpack_require__("5319"),__webpack_require__("e25e"),__webpack_require__("e439"),__webpack_require__("a15b"),__webpack_require__("25f0"),__webpack_require__("d81d"),__webpack_require__("fb6a"),__webpack_require__("3ca3"),__webpack_require__("ddb0"),__webpack_require__("2b3d"),__webpack_require__("d28b"),__webpack_require__("f4b3"),__webpack_require__("bf19"),__webpack_require__("a9e3"),__webpack_require__("acd8"),__webpack_require__("466d"),function(t){var e={};function i(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===_typeof2(t)&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=16)}([function(t,e,i){function a(){return Math.floor(1e8*Math.random())}var n=function(t){t=t?1:0;try{return location.search.substr(t)}catch(a){try{var e=document.URL,i=e.indexOf("?");if(i>=0)return e.substr(i+t)}catch(t){}}return""},o={};!function(){for(var t=n(!0).split("&"),e=0;e<t.length;e++){var i=/(.*?)=(.*)/.exec(t[e]);i&&(o[i[1]]=i[2])}}(),t.exports={href:function(){try{return location.href}catch(t){try{return document.URL}catch(t){}}return""},getQuery:function(t){var e=n();return t=t?1:0,(e=e?"".concat(e.replace(/&rand=[^&]+/,""),"&rand=").concat(a()):"?rand=".concat(a())).substr(t)},queryParam:function(t){return o[t]},queryMap:function(){return $.extend({},o)},parse2rgb:function(t){if(!t||"string"!=typeof t)return null;t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,i,a){return e+e+i+i+a+a}));var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16),s:"#".concat(e[1]).concat(e[2]).concat(e[3])}:null},arrIndexOf:function(t,e){if("function"==typeof t.indexOf)return t.indexOf(e);for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}}},function(t,e,i){var a=function(){var t=1,e=/subsid=(\d+)/.exec(location.href);e&&(t=parseInt(e[1],10)+1);var i=function(e,i){var a=i||t;return e=/subsid=\d+/.test(e)?e.replace(/subsid=\d+/g,"subsid=".concat(a)):"".concat(e,"&subsid=").concat(a),i||t++,e};return i.get=function(){return t},i.bind=function(){var e=t++;return function(t){return i(t,e)}},i}();t.exports=a},function(t,e,i){var a=Object.prototype.hasOwnProperty,n=Object.prototype.toString,o=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===n.call(t)},c=function(t){if(!t||"[object Object]"!==n.call(t))return!1;var e,i=a.call(t,"constructor"),o=t.constructor&&t.constructor.prototype&&a.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!i&&!o)return!1;for(e in t);return void 0===e||a.call(t,e)},u=function(t,e){o&&"__proto__"===e.name?o(t,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):t[e.name]=e.newValue},d=function(t,e){if("__proto__"===e){if(!a.call(t,e))return;if(r)return r(t,e).value}return t[e]};t.exports=function t(){var e,i,a,n,o,r,p=arguments[0],l=1,h=arguments.length,f=!1;for("boolean"==typeof p&&(f=p,p=arguments[1]||{},l=2),(null==p||"object"!==_typeof2(p)&&"function"!=typeof p)&&(p={});l<h;++l)if(null!=(e=arguments[l]))for(i in e)a=d(p,i),p!==(n=d(e,i))&&(f&&n&&(c(n)||(o=s(n)))?(o?(o=!1,r=a&&s(a)?a:[]):r=a&&c(a)?a:{},u(p,{name:i,newValue:t(f,r,n)})):void 0!==n&&u(p,{name:i,newValue:n}));return p}},function(t,e,i){var a,n,o=i(1),r={ERROR_TYPE_FRAMEJS_DOWNLOAD_FAIL:16,ERROR_TYPE_JSONP_PREHANDLE:17,ERROR_TYPE_FRAMEJS_CODE_ERROR:18,CALLBACK_NAME:19},s={ERROR_TYPE_FRAMEJS_DOWNLOAD_FAIL:"ERROR_TYPE_FRAMEJS_DOWNLOAD_FAIL",ERROR_TYPE_JSONP_PREHANDLE:"ERROR_TYPE_JSONP_PREHANDLE",ERROR_TYPE_FRAMEJS_CODE_ERROR:"ERROR_TYPE_FRAMEJS_CODE_ERROR",CALLBACK_NAME:"CALLBACK_NAME"},c=(a=document.referrer,n=location.href||document.URL,a=a.length>512?a.substr(0,512):a,n=n.length>1024?n.substr(0,1024):n,["referer=".concat(encodeURIComponent(a)),"href=".concat(encodeURIComponent(n))].join("&"));t.exports={type:r,send:function(t,e,i){try{(i=i||s[t]).length>1024&&i.substr(0,1024);var a=["type=".concat(t=r[t]),"appid=".concat(e),"reason=".concat(encodeURIComponent(i))],n="https://aq.qq.com/cn2/manage/mbtoken/cap_monitor?".concat(c,"&").concat(a.join("&"));(new Image).src=o(n)}catch(t){}},perfectStack:function(t){var e="";t&&t.stack&&(e=t.stack.replace(/\n/gi,"").split(/\bat\b/).join("\n").replace(/\?[^:]+/gi,""));try{var i=t.toString();e.indexOf(i)<0&&(e="".concat(i,"@").concat(e))}catch(t){}return e}}},,function(t,e,i){t.exports={add:function(t,e,i){t&&(t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent?t.attachEvent("on".concat(e),i):t["on".concat(e)]=i)},remove:function(t,e,i){t&&(t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent?t.detachEvent("on".concat(e),i):t["on".concat(e)]=null)}}},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=function(t,e){var i,a=t[1]||"",n=t[3];if(!n)return a;if(e&&"function"==typeof btoa){var o=(i=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),r=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot).concat(t," */")}));return[a].concat(r).concat([o]).join("\n")}return[a].join("\n")}(e,t);return e[2]?"@media ".concat(e[2],"{").concat(i,"}"):i})).join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var a={},n=0;n<this.length;n++){var o=this[n][0];"number"==typeof o&&(a[o]=!0)}for(n=0;n<t.length;n++){var r=t[n];"number"==typeof r[0]&&a[r[0]]||(i&&!r[2]?r[2]=i:i&&(r[2]="(".concat(r[2],") and (").concat(i,")")),e.push(r))}},e}},function(t,e){var i,a={},n=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}},o=n((function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())})),r=n((function(){return document.head||document.getElementsByTagName("head")[0]})),s=null,c=0;function u(t,e){for(var i=0;i<t.length;i++){var n=t[i],o=a[n.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](n.parts[r]);for(;r<n.parts.length;r++)o.parts.push(h(n.parts[r],e))}else{var s=[];for(r=0;r<n.parts.length;r++)s.push(h(n.parts[r],e));a[n.id]={id:n.id,refs:1,parts:s}}}}function d(t){for(var e=[],i={},a=0;a<t.length;a++){var n=t[a],o=n[0],r={css:n[1],media:n[2],sourceMap:n[3]};i[o]?i[o].parts.push(r):e.push(i[o]={id:o,parts:[r]})}return e}function p(t,e){var i=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);t.apply(e,i.concat(a))}}function l(){var t=document.createElement("style"),e=r();return t.type="text/css",e.appendChild(t),t}function h(t,e){var i,a,n,o,u;if(e.singleton){var d=c++;i=s||(s=l()),a=p(m,null,i,d,!1),n=p(m,null,i,d,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(o=document.createElement("link"),u=r(),o.rel="stylesheet",u.appendChild(o),a=p(g,null,i=o),n=function(){i.parentNode.removeChild(i),i.href&&URL.revokeObjectURL(i.href)}):(i=l(),a=p(v,null,i),n=function(){i.parentNode.removeChild(i)});return a(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;a(t=e)}else n()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!==("undefined"==typeof document?"undefined":_typeof2(document)))throw new Error("The style-loader cannot be used in a non-browser environment");void 0===(e=e||{}).singleton&&(e.singleton=o());var i=d(t);return u(i,e),function(t){for(var n=[],o=0;o<i.length;o++){var r=i[o];(s=a[r.id]).refs--,n.push(s)}for(t&&u(d(t),e),o=0;o<n.length;o++){var s;if(0===(s=n[o]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete a[s.id]}}}};var f=(i=[],function(t,e){var a=[];i[t]=e;for(var n=0;n<i.length;n++)i[n]&&a.push(i[n]);return a.join("\n")});function m(t,e,i,a){var n=i?"":a.css;if(t.styleSheet)t.styleSheet.cssText=f(e,n);else{var o=document.createTextNode(n),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(o,r[e]):t.appendChild(o)}}function v(t,e){var i=e.css,a=e.media;if(e.sourceMap,a&&t.setAttribute("media",a),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}function g(t,e){var i=e.css,a=(e.media,e.sourceMap);a&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */"));var n=new Blob([i],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(n),o&&URL.revokeObjectURL(o)}},function(module,exports,__webpack_require__){var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return _typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof2(t)};"object"!==("undefined"==typeof JSON?"undefined":_typeof(JSON))&&(JSON={}),function(){var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta,rep;function f(t){return t<10?"0".concat(t):t}function this_value(){return this.valueOf()}function quote(t){return rx_escapable.lastIndex=0,rx_escapable.test(t)?'"'.concat(t.replace(rx_escapable,(function(t){var e=meta[t];return"string"==typeof e?e:"\\u".concat("0000".concat(t.charCodeAt(0).toString(16)).slice(-4))})),'"'):'"'.concat(t,'"')}function str(t,e){var i,a,n,o,r,s=gap,c=e[t];switch(c&&"object"===(void 0===c?"undefined":_typeof(c))&&"function"==typeof c.toJSON&&(c=c.toJSON(t)),"function"==typeof rep&&(c=rep.call(e,t,c)),void 0===c?"undefined":_typeof(c)){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(c)){for(o=c.length,i=0;i<o;i+=1)r[i]=str(i,c)||"null";return n=0===r.length?"[]":gap?"[\n".concat(gap).concat(r.join(",\n".concat(gap)),"\n").concat(s,"]"):"[".concat(r.join(","),"]"),gap=s,n}if(rep&&"object"===(void 0===rep?"undefined":_typeof(rep)))for(o=rep.length,i=0;i<o;i+=1)"string"==typeof rep[i]&&(n=str(a=rep[i],c))&&r.push(quote(a)+(gap?": ":":")+n);else for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(n=str(a,c))&&r.push(quote(a)+(gap?": ":":")+n);return n=0===r.length?"{}":gap?"{\n".concat(gap).concat(r.join(",\n".concat(gap)),"\n").concat(s,"}"):"{".concat(r.join(","),"}"),gap=s,n}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?"".concat(this.getUTCFullYear(),"-").concat(f(this.getUTCMonth()+1),"-").concat(f(this.getUTCDate()),"T").concat(f(this.getUTCHours()),":").concat(f(this.getUTCMinutes()),":").concat(f(this.getUTCSeconds()),"Z"):null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value),"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(t,e,i){var a;if(gap="",indent="","number"==typeof i)for(a=0;a<i;a+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=e,e&&"function"!=typeof e&&("object"!==(void 0===e?"undefined":_typeof(e))||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(t,e){var i,a,n=t[e];if(n&&"object"===(void 0===n?"undefined":_typeof(n)))for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(void 0!==(a=walk(n,i))?n[i]=a:delete n[i]);return reviver.call(t,e,n)}if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,(function(t){return"\\u".concat("0000".concat(t.charCodeAt(0).toString(16)).slice(-4))}))),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("(".concat(text,")")),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()},function(t,e,i){var a="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return _typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof2(t)},n="[CODE_VERIFY]",o="postMessage"in window;function r(t,e,i){var n="";if(arguments.length<2?n="[Msger] error 1":"object"!=(void 0===t?"undefined":a(t))?n="[Msger] error 2":"string"!=typeof e&&(n="[Msger] error 3"),n)throw new Error(n);this.target=t,this.name=e,this.domain=i||"*"}function s(t,e){this.targets={},this.name=t,this.listenFunc=[],"string"!=typeof(n=e||n)&&(n=n.toString()),this.initListen()}r.prototype.send=o?function(t){this.target.postMessage(t,this.domain)}:function(t){var e=window.navigator[n+this.name];if("function"!=typeof e)throw new Error("target callback function is not defined");e(t,window)},s.prototype.addTarget=function(t,e,i){var a=new r(t,e,i);this.targets[e]=a},s.prototype.initListen=function(){var t=this,e=function(e){"object"==(void 0===e?"undefined":a(e))&&e.data&&(e=e.data);for(var i=0;i<t.listenFunc.length;i++)t.listenFunc[i](e)};o?"addEventListener"in document?window.addEventListener("message",e,!1):"attachEvent"in document&&window.attachEvent("onmessage",e):window.navigator[n+this.name]=e},s.prototype.listen=function(t){this.listenFunc.push(t)},s.prototype.clear=function(){this.listenFunc=[]},s.prototype.send=function(t){var e,i=this.targets;for(e in i)i.hasOwnProperty(e)&&i[e].send(t)},window.TCapMsg=s,t.exports=s},,,,,,,function(module,exports,__webpack_require__){var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return _typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof2(t)};if(!0===window.__TencentCaptchaExists__)throw new Error("请勿多次引用腾讯验证码的接入js");window.__TencentCaptchaExists__=!0,__webpack_require__(17),__webpack_require__(8);var Messenger=__webpack_require__(9),domReady=__webpack_require__(19),btoa=window.btoa||__webpack_require__(20),extend=Object.assign||__webpack_require__(2),loadScript=__webpack_require__(21),eventListener=__webpack_require__(5),Executor=__webpack_require__(22),isIEVar=__webpack_require__(23),isElement=__webpack_require__(24),invisibleIframe=__webpack_require__(25),getScriptDomain=__webpack_require__(26),scriptDomain=getScriptDomain()||"",isWechatDevtools=navigator.userAgent&&/wechatdevtools/.test(navigator.userAgent),isWindows=/windows/i.test(navigator.userAgent),isMobile=!isWindows&&("ontouchstart"in window||"ontouchstart"in document.createElement("div")||isWechatDevtools),capDomain="https://ssl.captcha.qq.com";capDomain||(capDomain=scriptDomain);var grayscaleFrameJs="/tcaptcha-frame.2de3157b.js",grayscaleThreshold=1,grayscaleAppId=["123","2100049389","2100049390","2046103261","2070173641","2060075756"],grayscaleProb=Math.random(),needGrayscaleJs=void 0,jsLoadStatus="none",capError=__webpack_require__(3),preVerifyData={},capObj=void 0,initQueue=[],defaultOpt={type:"popup",pos:isIEVar(6)?"absolute":"fixed",lang:2052,showHeader:isMobile,needFeedBack:!0,themeColor:"",tcaptchaFlag:!0,gettype:"cap_union_prehandle",domain:capDomain,htdoc_path:capDomain},noop=function(){},isGrayscaleAppId=function(t){if(void 0!==needGrayscaleJs)return needGrayscaleJs;for(var e=0,i=grayscaleAppId.length;e<i;e++)if(t==grayscaleAppId[e])return needGrayscaleJs=!0;return needGrayscaleJs=!1},callbackWrap=function(t,e){return function(i){"object"===(void 0===i?"undefined":_typeof(i))&&(i=_objectSpread({bizState:t.options.bizState,appid:t.options.appid},i)),e&&e(i)}},executor=new Executor((function(){if(initQueue.length>0){for(var t=0;t<initQueue.length;t++)initQueue[t].show();initQueue.length=0}}),0),Captcha=function Captcha($btn,appid,_tcallback_,opts){var bizState=void 0;if(isElement($btn))if(appid&&"object"===(void 0===appid?"undefined":_typeof(appid)))opts=appid,appid=null,_tcallback_=null;else{if(appid=appid||$btn.getAttribute("data-appid"),!_tcallback_){var callbackName=$btn.getAttribute("data-cbfn");try{_tcallback_=eval("window.".concat(callbackName))}catch(t){throw new Error("Lost `callback`")}}bizState=$btn.getAttribute("data-biz-state")}else{if("string"!=typeof $btn||"function"!=typeof appid)throw new Error("Arguments error.");opts=_tcallback_,_tcallback_=appid,appid=$btn,$btn=null}opts=opts||{},opts.callback=_tcallback_||opts.callback,opts.start=opts.start||noop,opts.end=opts.end||noop;var readyCallback="function"==typeof opts.ready?opts.ready:noop;if(opts.ready=function(t){readyCallback.call(this,t)},opts.appid=appid||opts.appid,opts.bizState=bizState||opts.bizState,opts.fwidth=parseFloat(opts.fwidth)||0,opts.sdkOpts=opts.sdkOpts||null,opts.ele=$btn,this.options=opts,"function"!=typeof opts.callback)throw new Error("Lost `callback`");if(this.initOpts=_objectSpread(_objectSpread({},defaultOpt),opts),this.langFun(),$btn){var that=this;eventListener.add($btn,"click",(function(){that.show()}))}};Captcha.prototype={show:function(){if(executor.isDone)this.__show__();else{for(var t=0;t<initQueue.length;t++)if(initQueue[t]===this)return;initQueue.push(this)}},__show__:function(){var t=this.initOpts;if(void 0===window.AqSCode)return capError.send("ERROR_TYPE_FRAMEJS_CODE_ERROR",t.appid),alert("页面加载异常，请刷新页面重试");this.destroy();var e=[];for(var i in e.push("aid=".concat(t.appid)),e.push("accver=1"),e.push("showtype=".concat(t.type)),e.push("ua=".concat(encodeURIComponent(btoa((navigator.userAgent||"").replace(/[\u00ff-\uffff]+/g,""))))),e.push("noheader=".concat("false"=="".concat(t.showHeader)?"1":"0")),e.push("fb=".concat("false"=="".concat(t.needFeedBack)?"0":"1")),e.push("enableDarkMode=".concat(t.enableDarkMode?"1":"0")),t.sid&&e.push("sid=".concat(t.sid)),preVerifyData)preVerifyData[i]&&e.push("".concat(i,"=").concat(encodeURIComponent(preVerifyData[i])));t.uid="".concat(t.uin||""),needGrayscaleJs&&(e.push("grayscale=1"),t.grayscale=1),isMobile?(e.push("clientype=1"),t.clientype=1,t.forceLang&&e.push("lang=".concat(t.forceLang)),t.params="?".concat(e.join("&"))):(e.push("clientype=2"),t.clientype=2,needGrayscaleJs&&t.forceLang&&e.push("lang=".concat(t.forceLang)),t.params="?".concat(e.join("&")),t.s_type_suffix="?".concat(e.join("&")),t.src="".concat(capDomain,"/template/new_placeholder.html").concat(t.s_type_suffix),t.s_type="".concat(capDomain,"/cap_union_prehandle").concat(t.s_type_suffix),t.slide_src="".concat(capDomain,"/template/new_slide_placeholder.html").concat(t.s_type_suffix),t.fb="false"=="".concat(t.needFeedBack)?"0":"1"),(capObj=new AqSCode(t)).listen(callbackWrap(this,t.callback),callbackWrap(this,t.ready)),capObj.start(callbackWrap(t.start)),capObj.end(callbackWrap(t.end)),(needGrayscaleJs||isMobile)&&((t.top||t.left)&&capObj.initPos({top:t.top||void 0,left:t.left||void 0}),capObj.create())},langFun:function(){if(this.initOpts.forceLang){var t={"zh-cn":"2052","zh-hk":"1028",en:"1033"},e=this.initOpts.forceLang;t[e]?(this.initOpts.lang=t[e],this.initOpts.forceLang=t[e],this.initOpts.forcestyle=1):this.initOpts.forceLang=""}},destroy:function(){capObj&&capObj.destroy&&capObj.destroy()},refresh:function(){capObj&&capObj.refresh&&capObj.refresh()},getTicket:function(){if(capObj&&capObj.getTicket){var t=null;return callbackWrap(this,(function(e){t=e}))(capObj.getTicket()),t}return null}};var autoBindBtn=function(){var t=document.getElementById("TencentCaptcha");t&&new Captcha(t)};executor.exec((function(t){domReady((function(){try{autoBindBtn()}catch(t){}new Messenger("TCaptchaVerifyDetect").listen((function(t){if(t&&"object"===(void 0===t?"undefined":_typeof(t)))switch(t.type){case"preVerify":extend(preVerifyData,t.data)}}));try{invisibleIframe("".concat(capDomain,"/template/captcha-pre-verify.html"))}catch(t){}t()}))})),executor.exec((function(t){jsLoadStatus="loading",needGrayscaleJs=!0,loadScript(grayscaleFrameJs,capDomain,capDomain,(function(){return!!window.AqSCode}),(function(){jsLoadStatus="loaded",t()}),(function(){jsLoadStatus="none",capError.send("ERROR_TYPE_FRAMEJS_DOWNLOAD_FAIL"),t()}))})),window.TencentCaptcha=Captcha},function(t,e,i){var a=i(18);"string"==typeof a&&(a=[[t.i,a,""]]),i(7)(a,{}),a.locals&&(t.exports=a.locals)},function(t,e,i){(t.exports=i(6)(!1)).push([t.i,"@keyframes animate_dots{0%{opacity:1}to{opacity:0}}@-webkit-keyframes animate_dots{0%{opacity:1}to{opacity:0}}.dot0,.dot1{animation:animate_dots .9s infinite;-moz-animation:animate_dots .9s infinite;-webkit-animation:animate_dots .9s infinite;-o-animation:animate_dots .9s infinite}.dot1{animation-delay:.2s;-webkit-animation-delay:.2s}.dot2{animation:animate_dots .9s infinite;-moz-animation:animate_dots .9s infinite;-webkit-animation:animate_dots .9s infinite;-o-animation:animate_dots .9s infinite;animation-delay:.4s;-webkit-animation-delay:.4s}.dots_item{display:inline-block;margin-right:5px;width:10px;height:10px;border-radius:50%;background:#4886ff}.verify-icon{position:absolute;width:100%;margin-top:70px;text-align:center}.t-mask{width:100%;height:100%;position:fixed;_position:absolute;left:0;top:0;background:#000;opacity:.5;filter:progid:DXImageTransform.Microsoft.Alpha(opacity=50);z-index:2000000000}",""])},function(t,e,i){t.exports=function(t){var e,i=[],a=document,n=a.documentElement,o=n.doScroll,r=(o?/^loaded|^c/:/^loaded|c/).test(a.readyState);function s(t){for(r=1;t=i.shift();)t()}return a.addEventListener&&a.addEventListener("DOMContentLoaded",e=function(){a.removeEventListener("DOMContentLoaded",e,!1),s()},!1),o&&a.attachEvent("onreadystatechange",e=function(){/^c/.test(a.readyState)&&(a.detachEvent("onreadystatechange",e),s())}),t=o?function(e){self!=top?r?e():i.push(e):function(){try{n.doScroll("left")}catch(i){return setTimeout((function(){t(e)}),50)}e()}()}:function(t){r?t():i.push(t)}}()},function(t,e,i){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=function(t){var e=[0,2,1][t.length%3],i=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[a.charAt(i>>>18),a.charAt(i>>>12&63),e>=2?"=":a.charAt(i>>>6&63),e>=1?"=":a.charAt(63&i)].join("")};t.exports=function(t){return t.replace(/[\s\S]{1,3}/g,n)}},function(t,e,i){t.exports=function t(e,i,a,n,o,r,s){s=s||1;var c=!1,u=document.createElement("script");function d(t){c||(t&&"load"===t.type||/^(loaded|complete)$/.test(this.readyState))&&(n()?(c=!0,o&&o()):p())}u.type="text/javascript",u.async=!0,u.src=(s>1?a:i)+e,"onload"in u?u.onload=d:u.onreadystatechange=d;var p=function(){c||(c=!0,s>=2?r&&r():t(e,i,a,n,o,r,s+1))};u.onerror=p,document.getElementsByTagName("head").item(0).appendChild(u)}},function(t,e,i){var a=function(t,e){this.i=0,this.doneCallback=t,this.isDone=!1,this.timeout=e||0;var i=this;this.immediateExec=setTimeout((function(){i.doneCheck()}),0)};a.prototype={doneCheck:function(t,e){try{t&&t(e)}catch(t){}if(this.i--,this.i<=0)try{this.isDone=!0,this.doneCallback()}catch(t){}},exec:function(t,e,i){clearTimeout(this.immediateExec);var a=!1,n="",o=this;this.i++,this.i>0&&(this.isDone=!1);try{(n=t((function(t){a||(a=!0,setTimeout((function(){o.doneCheck(e,t)}),0))})))&&(a=!0,setTimeout((function(){o.doneCheck(e,n)}),0))}catch(t){}(i=i||this.timeout||0)>0&&setTimeout((function(){a||(a=!0,o.doneCheck(e,""))}),i)}},t.exports=a},function(t,e,i){t.exports=function(t){var e=document.createElement("b");return e.innerHTML="\x3c!--[if IE ".concat(t,"]><i></i><![endif]--\x3e"),e.getElementsByTagName("i")&&1===e.getElementsByTagName("i").length}},function(t,e,i){var a="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return _typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof2(t)};t.exports=function(t){try{return t instanceof HTMLElement}catch(e){return"object"===(void 0===t?"undefined":a(t))&&1===t.nodeType&&"object"===a(t.style)&&"object"===a(t.ownerDocument)}}},function(t,e,i){t.exports=function(t){var e=document.createElement("iframe");return e.src=t,e.style.cssText="width: 0px; height: 0px; display: none;",(document.body||document.getElementsByTagName("body").item("0")).appendChild(e),e}},function(t,e,i){var a=i(0).href;t.exports=function(){try{var t=document.getElementById("CaptchaScript")||function(){for(var t=document.getElementsByTagName("script"),e=0;e<t.length;e++){var i=t[e];if(i.src.match(/captcha\.js/i))return i}}()||"";if(!t)return"";var e=t.src,i=function(t){var e=t.split("?");if(2!==e.length)return{};for(var i=e[1]&&e[1].split("&"),a={},n=0;n<i.length;n++){var o=i[n].split("=");o[1]&&(a[o[0]]=decodeURIComponent(o[1]))}return a}(e).domain;if(i)return i;var n=/(https?\:\/\/[0-9a-zA-Z-:\.]+)\//i,o=e.match(n)||a().match(n);return o?o[1]:""}catch(t){return""}}}])},6670:function(t,e,i){"use strict";var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.updateThreads=function(){return c.apply(this,arguments)},i("96cf");var n=a(i("5530")),o=a(i("15fd")),r=a(i("1da1")),s={id:{type:"number",required:!0}};function c(){return(c=(0,r.default)(regeneratorRuntime.mark((function t(){var e,i,a,r,c,u,d,p,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:{},t.prev=1,i=e.params,a=void 0===i?{}:i,r=e.data,c=void 0===r?{}:r,u=(0,o.default)(e,["params","data"]),d=(0,n.default)((0,n.default)({url:"/api/threads/update.v2",method:"POST",params:a,data:c},u),{},{validateRules:s}),t.next=6,this.http(d);case 6:return p=t.sent,t.abrupt("return",p);case 10:t.prev=10,t.t0=t.catch(1);case 12:case"end":return t.stop()}}),t,this,[[1,10]])})))).apply(this,arguments)}},"6f74":function(t,e,i){"use strict";var a=i("b95e");t.exports={computed:{user:function(){var t=this.$store.getters["session/get"]("userId");return t?this.$store.getters["jv/get"]("users/".concat(t)):{}}},methods:{getUserInfo:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=(new Date).getTime(),i=uni.getStorageSync(a.STORGE_GET_USER_TIME);if(t||(e-i)/1e3>60){var n={include:"groups,wechat"},o=this.$store.getters["session/get"]("userId");this.$store.commit("jv/deleteRecord",{_jv:{type:"users",id:o}}),this.$store.dispatch("jv/get",["users/".concat(o),{params:n}]).then((function(){return uni.$emit("updateNotiNum")})),uni.setStorageSync(a.STORGE_GET_USER_TIME,(new Date).getTime())}},logind:function(){var t=this,e=this.$store.getters["session/get"]("userId");if(e){this.$store.dispatch("jv/get",["forum",{params:{include:"users"}}]);this.$store.dispatch("jv/get",["users/".concat(e),{params:{include:"groups,wechat"}}]).then((function(e){t.$u.event.$emit("logind",e)})),this.$store.dispatch("forum/setError",{loading:!1})}}}}},"790f":function(t,e,i){"use strict";(function(t){var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.requestParamsValidator=c,e.validateParameter=void 0,i("96cf");var n=a(i("5530")),o=a(i("1da1"));i("d3b7");var r=a(i("2a95")),s=a(i("2d83"));function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(a,n){new r.default(i).validate(e,{firstFields:!0},(function(e,i){var o=e?"fail":"success",r=e?e[0].message:"";"success"===o?a({status:o,message:r,fieldsData:i}):(t.warn("The current parameter validation failed."),n((0,s.default)("Parameter Validator Error",{status:o,message:r,fieldsData:i,errors:e},null)))}))}))}var u=function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(e){var i,a,o,r,s,u,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.params,a=void 0===i?{}:i,o=e.data,r=void 0===o?{}:o,s=e.isValidate,u=e.validateRules,!s||!u){t.next=5;break}return d=(0,n.default)((0,n.default)({},a),r),t.next=5,c(d,u,e);case 5:return t.abrupt("return",e);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.validateParameter=u}).call(this,i("5a52").default)},"79fc":function(t,e,i){"use strict";var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.readThreadList=function(){return c.apply(this,arguments)},i("96cf");var n=a(i("5530")),o=a(i("15fd")),r=a(i("1da1")),s={page:{type:"number"},perPage:{type:"number"},filter:{type:"object",required:!0,fields:{sticky:{type:"number",required:!0},essence:{type:"number",required:!0},types:{type:"array"},categoryids:{type:"array"},sort:{type:"number"},attention:{type:"number"}}}};function c(){return(c=(0,r.default)(regeneratorRuntime.mark((function t(){var e,i,a,r,c,u,d,p,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:{},t.prev=1,i=e.params,a=void 0===i?{}:i,r=e.data,c=void 0===r?{}:r,u=(0,o.default)(e,["params","data"]),d=(0,n.default)((0,n.default)({url:"/api/threads.v2",method:"GET",params:a,data:c},u),{},{validateRules:s}),t.next=6,this.http(d);case 6:return p=t.sent,t.abrupt("return",p);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",t.t0);case 13:case"end":return t.stop()}}),t,this,[[1,10]])})))).apply(this,arguments)}},"7c26":function(t,e,i){"use strict";(function(t){var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.LocalBridge=void 0,i("99af"),i("d3b7"),i("25f0"),i("e25e");var n=a(i("5530")),o=a(i("d4ec")),r=a(i("bee2")),s=null;var c="undefined"!=typeof window;function u(){var t="__dzqtest_ls__";try{return!!s&&(s.setItem(t,t),s.getItem(t),!0)}catch(t){return!1}}s=c?window.localStorage:{};var d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.default)(this,e);var i="__dzqls-",a=0;this.options=(0,n.default)({prefix:i,expires:a},t),this.expiresPrefix="expires".concat(this.options.prefix)}return(0,r.default)(e,[{key:"getKey",value:function(t){var e=this.options.prefix;return"".concat(e).concat(t)}},{key:"getExpiresKey",value:function(t){return"".concat(this.expiresPrefix).concat(t)}},{key:"getCurrentTime",value:function(){return Math.floor((new Date).getTime()/1e3)}},{key:"getExpiresValue",value:function(t){return(this.getCurrentTime()+t).toString(10)}},{key:"shiftItem",value:function(t){if(!u())return!1;var e=s.removeItem;e(this.getKey(t)),e(this.getExpiresKey(t))}},{key:"isExpired",value:function(e){if(u()){var i=s.getItem(this.getExpiresKey(e));if(i){var a=parseInt(i,10),n=this.getCurrentTime();if(t.log(a,n),n>a)return this.shiftItem(e),!0}}}},{key:"set",value:function(t,e,i){var a=this.getKey(t),n=e;if(!u())return!1;try{n=JSON.stringify(e)}catch(t){return!1}var o=s,r=o.setItem,c=o.removeItem;try{r(a,n);var d=this.getExpiresKey(t);i?r(d,this.getExpiresValue(i)):c(d)}catch(t){return!1}return!0}},{key:"get",value:function(t){if(!u())return null;if(this.isExpired(t))return null;var e=s.getItem(this.getKey(t));try{return JSON.parse(e)}catch(t){return e}}},{key:"remove",value:function(t){u()&&this.shiftItem(t)}},{key:"clear",value:function(){u()&&s.clear()}}]),e}();e.LocalBridge=d;var p=d;e.default=p}).call(this,i("5a52").default)},"7f23":function(t,e,i){"use strict";var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.createThread=function(){return c.apply(this,arguments)},i("96cf");var n=a(i("5530")),o=a(i("15fd")),r=a(i("1da1")),s={categoriesId:{type:"number",required:!0},content:{type:"string",required:!0},type:{type:"number",required:!0},isAnonymous:{type:"number"},price:{type:"number"},attachmentPrice:{type:"number"},freeWords:{type:"number"},location:{type:"string"},longitude:{type:"number"},latitude:{type:"number"},address:{type:"string"},id:{type:"string"},isDraft:{type:"number"},isRedPacket:{type:"number"},isOldDraft:{type:"number"},title:{type:"string"},postGoodsId:{type:"number"},redPacket:{type:"object",fields:{condition:{type:"number"},likenum:{type:"number"},money:{type:"number"},number:{type:"number"},rule:{type:"number"},orderId:{type:"string"},orderPrice:{type:"number"}}},attachments:{type:"array",defaultField:{type:"object",fields:{id:{type:"number"},type:{type:"string"}}}},question:{type:"object",fields:{type:{type:"number"},price:{type:"number"},orderId:{type:"string"},isOnlooker:{type:"boolean"},beUserId:{type:"number"},expiredAt:{type:"date"}}}};function c(){return(c=(0,r.default)(regeneratorRuntime.mark((function t(){var e,i,a,r,c,u,d,p,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:{},t.prev=1,i=e.params,a=void 0===i?{}:i,r=e.data,c=void 0===r?{}:r,u=(0,o.default)(e,["params","data"]),d=(0,n.default)((0,n.default)({url:"/api/thread.v2",method:"POST",params:a,data:c},u),{},{validateRules:s}),t.next=6,this.http(d);case 6:return p=t.sent,t.abrupt("return",p);case 10:t.prev=10,t.t0=t.catch(1);case 12:case"end":return t.stop()}}),t,this,[[1,10]])})))).apply(this,arguments)}},"7fe0":function(t,e,i){"use strict";(function(t){var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("5530")),o=a(i("d4ec")),r=a(i("bee2")),s=a(i("98ef")),c=a(i("7c26")),u=i("790f"),d=a(i("4328")),p=new c.default({prefix:""}),l=function(t){var e=p.get("access_token");return e&&(t.headers.authorization="Bearer ".concat(e)),t},h=function(t){return{data:t.data,status:t.status}},f=function(){function e(t){(0,o.default)(this,e),this.axiosConfig=t,this.createHttp()}return(0,r.default)(e,[{key:"createHttp",value:function(){this.http=s.default.create((0,n.default)({isValidate:!0,withCredentials:!0,paramsSerializer:function(t){return d.default.stringify(t,{arrayFormat:"indices",encode:!1})}},this.axiosConfig)),this.setHttpRequestInterceptors(),this.setHttpResponseInterceptors()}},{key:"setHttpRequestInterceptors",value:function(){this.http.interceptors.request.use(l),this.http.interceptors.request.use(u.validateParameter,null,{synchronous:!0})}},{key:"setHttpResponseInterceptors",value:function(){this.http.interceptors.response.use(h,(function(e){return t.log(e),e}))}}]),e}();e.default=f}).call(this,i("5a52").default)},"829b":function(t,e,i){"use strict";var a=i("94b6");i.n(a).a},"913c":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADIBAMAAABfdrOtAAAAFVBMVEVHcExGRkZGRkZGRkZFRUVGRkZHR0eRrgNKAAAABnRSTlMAFrndSYSvQ3G1AAACxUlEQVR42u2aQW/bMAyFbcfZ2YjRnBN09XnGNp+zS87e1uY82an+/0/YujiLBawS+QgTK8Z3K9r4K0XmiaKVZSaTyWQymUwmk8lkMplMJtN/pLv7zjP08AVgbDxX79mM0vO150JOAMQfeIw1wvBnhUC8r5bOyIs+cCBHEPLMYOQdCBkZ67XyqBj11cCQfuH6ZWb+iEN+LF2/L3JUSK0B6RQghVeAnBQgkrSTIUcFSN4pQGqvAGkUIGuvADkqQEqvAKkVIML6pUEKrwA5KUDEaadAYvU7PoT5+nyPQWJpH/usnP/60ytr6yT168ITy/CricshSJPop/ImPImcAMg62Rlu5oH8PYVOYluXpF1D2f3+8R0fUhIOHlMow+UTWz6kJvS4Uyi710N3EttqZ74zRD7hJLY1zCpwF/mEE9nW7clDrOKdyLZuj44FEoekt91pElBEA4lC8rS/DtNxsI/m0Am33T3Fg5yw2xoqQjE66W61J/xXTrq3z0IpgJ1xyx01NQCE2Df+mTcUfjnI1cEidfJGILLl2vICwRJf8ALBSrhkBgJ9GUm2MgpthWSQrdQgc3ogX2GrJxTxtZW4wvibVvrUe3t2C2+/ydTfHj1UaCORGqDOF6mFW6JEc3eeN3cV2twlrKWfL1GLtqmJb/1hvkJTKEDDHe8hqyDXLXp0iLvkIfiLSxkgkUSnqH1YtC16nIsa2DkMdYQPpmW8vPIm/G7WCwwLnr4HPz99AycS0rEdbYDTaEBWGhCVoZp4zvnvDDrFszsSpNCAZJ0GROWFQKkBUXlJIzQw6ouzRgOy0oDkGhBR6skQlRfMEgMjvyqXGBj9pb9g79rR70hsYQjjIgaees4VHLSKOZdjYANzHAhqYLy7V5vlVysLu2uyeh4kuwMYzDtk0II9V2wI94rix0eAYTKZTCaTyWQymUwmk8lkMr0l/QQpFrC5b3mvpgAAAABJRU5ErkJggg=="},"94b6":function(t,e,i){var a=i("bb28");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("4f06").default)("25b09713",a,!0,{sourceMap:!1,shadowMode:!1})},"98ef":function(t,e,i){"use strict";var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Request=void 0;var n=a(i("5530")),o=a(i("bc3a")),r=a(i("0a1d")),s=o.default;e.Request=s,s.defaults=(0,n.default)((0,n.default)((0,n.default)({},s.defaults),r.default),{},{validateRules:null});var c=s;e.default=c},b42d:function(t,e,i){"use strict";i.r(e);var a=i("0575"),n=i("f7de");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("829b");var r=i("f0c5"),s=Object(r.a)(n.default,a.b,a.c,!1,null,"2ca01701",null,!1,a.a,void 0);e.default=s.exports},b469:function(t,e){t.exports={computed:{forums:function(){return this.$store.getters["jv/get"]("forums/1")}}}},bb28:function(t,e,i){(e=i("24fb")(!1)).push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/* eg:\n  .container {\n    color: --color(BG-1);\n  }\n*/.endTimes[data-v-2ca01701]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-bottom:%?2?% solid var(--qui-BOR-ED);-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.post-box__ft-tit[data-v-2ca01701]{display:block;margin:%?30?% 0;font-size:%?30?%;font-weight:bolder!important;color:var(--qui-FC-7D7979);color:#333!important}.post-box[data-v-2ca01701]{width:100vw;height:100%;padding:%?40?%;overflow:hidden;background-color:var(--qui-BG-2);box-sizing:border-box}.post-box__title[data-v-2ca01701]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:100vw;height:%?100?%;margin-bottom:%?30?%;border-bottom:%?2?% solid var(--qui-BOR-ED)}.post-box__title-input[data-v-2ca01701]{width:100%;padding-right:%?80?%;font-size:%?36?%}.post-box__titles[data-v-2ca01701]{margin-bottom:%?30?%}.post-box__hd[data-v-2ca01701]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.post-box__hd-l__icon[data-v-2ca01701]{margin-right:%?54?%}.post-box__hd-r[data-v-2ca01701]{font-size:%?26?%;color:var(--qui-FC-777);color:#999!important}.post-box__con[data-v-2ca01701]{width:100%;max-height:%?900?%;padding:%?10?% 0 0;margin-top:%?20?%;margin-bottom:%?63?%;overflow:hidden;background-color:var(--qui-BG-1);border:%?1?% solid var(--qui-BOR-DDD);border-radius:%?7?%;box-sizing:border-box}.post-box__con-text[data-v-2ca01701]{z-index:0;width:100%;max-height:%?900?%;min-height:%?400?%;min-height:%?238?%;padding:%?10?% %?20?% %?20?%;font-size:%?30?%;line-height:%?40?%;box-sizing:border-box}.post-box__con-text .text-cover[data-v-2ca01701]{font-size:%?30?%;line-height:%?40?%}.post-box__con-text--static[data-v-2ca01701]{overflow:auto}.post-box__ft-tit[data-v-2ca01701]{display:block;margin:%?30?% 0;font-size:%?30?%;color:var(--qui-FC-7D7979)}.post-box__ft-categories[data-v-2ca01701]{margin-bottom:%?40?%}.post-box__good[data-v-2ca01701]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;margin:%?30?% 0;font-size:%?28?%}.post-box__good__image[data-v-2ca01701]{width:%?160?%;height:%?160?%;margin:0 %?30?% 0 0;border-radius:%?5?%}.post-box__good__info[data-v-2ca01701]{position:relative;-webkit-box-flex:1;-webkit-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.post-box__good__title[data-v-2ca01701]{max-height:%?120?%;overflow:hidden;font-weight:700;line-height:%?40?%;color:var(--qui-FC-333)}.post-box__good__ft[data-v-2ca01701]{position:absolute;bottom:0;display:-webkit-box;display:-webkit-flex;display:flex;width:100%;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;line-height:%?45?%;color:var(--qui-FC-777)}.post-box__good__price[data-v-2ca01701]{display:inline-block;font-size:%?36?%;color:var(--qui-RED)}.post-box__good__btn[data-v-2ca01701]{display:inline-block}.post-box__space[data-v-2ca01701]{width:100%;height:%?160?%;margin:%?30?% 0;line-height:%?160?%;color:var(--qui-FC-B5);text-align:center;background-color:var(--qui-FC-f7);border:%?1?% solid var(--qui-BOR-ED);border-radius:%?5?%}.post-box__position[data-v-2ca01701] {position:relative;color:var(--qui-FC-777)}.post-box__position[data-v-2ca01701] .icon-weizhi{margin-right:%?10?%}.post-box__position[data-v-2ca01701] .icon-close1{position:absolute;top:%?36?%;right:0;z-index:100}.play-load .post-box__video__play__load__mask[data-v-2ca01701]{position:absolute;width:100%;height:100%;background-color:var(--qui-BG-ED);border:1px solid var(--qui-BOR-ED);border-radius:%?5?%;opacity:.7}.play-load .post-box__video__play__load__text[data-v-2ca01701]{position:relative;z-index:2;font-size:%?30?%;line-height:%?36?%;color:var(--qui-FC-34)}.play-load uni-progress[data-v-2ca01701]{position:absolute;bottom:%?9.5?%;z-index:3;width:87.5%}.post-box__ft-categories[data-v-2ca01701] .qui-button--button{margin-top:%?10?%;margin-right:%?20?%;margin-bottom:%?10?%}.post-box__ft-categories[data-v-2ca01701] .qui-button--button[size="default"]{border:1px solid rgba(0,0,0,.2)}.post-box__ft-categories[data-v-2ca01701] .qui-button--button:after{border:none;border-radius:0}.post-box__ft-categories[data-v-2ca01701] .cateActive[size="default"]{border:1px solid #1878f3}.popup-content-btn[data-v-2ca01701]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.popup-content-btn .popup-btn[data-v-2ca01701]{margin-top:%?20?%}.popup-share[data-v-2ca01701]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;background:var(--qui-BG-2)}.popup-share-content[data-v-2ca01701]{height:%?477?%;padding:%?40?% %?45?%;text-align:center;box-sizing:border-box}.popup-share-content .popup-title[data-v-2ca01701]{font-size:%?30?%}.popup-share-content-space[data-v-2ca01701]{width:100%;height:%?9?%;background:var(--qui-BG-ED)}.emoji-bd[data-v-2ca01701]{position:relative;width:100%}[data-v-2ca01701] uni-textarea .textarea-placeholder{font-size:%?30?%;color:var(--qui-FC-B5)}[data-v-2ca01701] uni-input .input-placeholder{font-size:%?36?%;color:var(--qui-FC-AAA)}.cell-item-right-text[data-v-2ca01701] .cell-item__body__right-text{color:var(--qui-RED)}[data-v-2ca01701] .cell-item__body__right .cell-item__body__right-text{font-size:%?36?%}[data-v-2ca01701] .cell-item__body__content-title{color:var(--qui-FC-777)}[data-v-2ca01701] .uni-list-cell{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;height:%?100?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:%?30?%;color:var(--qui-FC-777);border-bottom:%?2?% solid #ededed}[data-v-2ca01701] .my-profile__avatar{position:relative}[data-v-2ca01701] .avatar-box__r__tit{color:var(--qui-FC-TAG)}[data-v-2ca01701] .uni-list-cell .uni-list-cell-pd{position:relative}.popup-dialog[data-v-2ca01701]{width:%?670?%;height:%?342?%;background-color:var(--qui-BG-2);border-radius:%?14?%}.popup-dialog__top[data-v-2ca01701]{padding-top:%?40?%;text-align:center}.popup-dialog__top uni-text[data-v-2ca01701]{font-size:%?30?%;color:var(--qui-FC-333)}.popup-dialog__cont[data-v-2ca01701]{position:relative;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:%?24?% %?52?% %?40?%}.popup-dialog__cont-rmb[data-v-2ca01701]{position:absolute;margin-left:%?25?%}.popup-dialog__cont-input[data-v-2ca01701]{width:100%;height:%?100?%;padding:0 %?25?% 0 %?80?%;font-size:%?40?%;text-align:right;border:1px solid var(--qui-BOR-DDD);border-radius:%?7?%;box-sizing:border-box}.popup-dialog__ft[data-v-2ca01701]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:%?100?%;border-top:%?2?% solid var(--qui-BOR-DDD);box-sizing:border-box}.popup-dialog__ft uni-button[data-v-2ca01701]{width:50%;color:var(--qui-FC-777);background-color:var(--qui-BG-2);border-radius:0}.popup-dialog__ft uni-button[data-v-2ca01701]:after{border:none}.popup-dialog__ft uni-button[data-v-2ca01701]:last-of-type{border-left:%?2?% solid var(--qui-BOR-DDD);border-bottom-right-radius:%?10?%}.popup-dialog__ft uni-button[data-v-2ca01701]:first-of-type{border-bottom-left-radius:%?10?%}.popup-dialog__ft .popup-btn--ok--blue[data-v-2ca01701]{color:var(--qui-BG-HIGH-LIGHT)}[data-v-2ca01701] .uni-video-cover{display:none}[data-v-2ca01701] .cell-item__body__right{display:contents}.markdown-box[data-v-2ca01701]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-justify-content:space-around;justify-content:space-around;width:100%;height:%?60?%;line-height:%?60?%;background:var(--qui-BG-FFF);border-top:1px solid var(--qui-BOR-DDD)}.username[data-v-2ca01701]{max-width:%?200?%;overflow:hidden;font-size:%?28?%;text-overflow:ellipsis;white-space:nowrap}.pay-type[data-v-2ca01701]{font-size:%?30?%;line-height:%?100?%;text-align:center;border-bottom:1px solid var(--qui-BOR-ED)}.watchpay[data-v-2ca01701]{font-size:%?28?%;color:var(--qui-FC-AAA)}',""]),t.exports=e},d1de:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RESPONSE_CODE=void 0;e.RESPONSE_CODE={SUCCESS:0,JUMP_TO_LOGIN:-3001,JUMP_TO_REGISTER:-3002,JUMP_TO_AUDIT:-3003,JUMP_TO_HOME_INDEX:-3004,INVALID_PARAMETER:-4001,UNAUTHORIZED:-4002,RESOURCE_EXIST:-4003,RESOURCE_NOT_FOUND:-4004,RESOURCE_IN_USE:-4005,NET_ERROR:-5001,INTERNAL_ERROR:-5002,DB_ERROR:-5003,EXTERNAL_API_ERROR:-5004,UNKNOWN_ERROR:-6001,DEBUG_ERROR:-6002}},dabc:function(t,e,i){"use strict";(function(t){var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf"),i("e25e"),i("b680"),i("ac1f"),i("1276"),i("99af"),i("d3b7"),i("4160"),i("159b"),i("c975"),i("acd8"),i("5319"),i("fb6a"),i("7039"),i("d81d"),i("a9e3"),i("a434");var n=a(i("1da1")),o=a(i("2909")),r=a(i("5530")),s=i("2f62"),c=i("b95e"),u=a(i("b469")),d=a(i("6f74")),p=a(i("245f")),l=a(i("6354")),h=a(i("4c82")),f=a(i("25d8")),m=a(i("840a")),v=a(i("8019")),g=a(i("1708")),_=a(i("26d0")),y=null,b={name:"Post",components:{onwTimePicker:v.default,uniPopupDialog:m.default},mixins:[u.default,d.default,p.default,(0,g.default)("other.can_create_thread_question"),l.default,f.default,h.default],data:function(){return{choiceMoney:!1,geographical_location:!1,anonymity_show:!1,timeValue:"",save:!1,currentId:"",timer1:null,timer2:null,SecondaryClassification:"",isCateAxtive:-1,expired_at:"",expired_time:!1,titlexune:"已添加0个标题",secondallcategories:[],two_categoryId:"",vditor:null,navTitle:"发布",loadStatus:"",textAreaValue:"",markdownShow:!1,barStatus:!1,textAreaLength:5e3,textAnswerLength:5e3,postTitle:"",checkClassData:[],type:0,price:0,priceAsk:0,pwdVal:"",browser:0,inputPrice:"",maxLength:7,inputWord:"",operating:"",emojiShow:!1,textShow:!0,header:{},formData:{},captcha:null,captcha_ticket:"",captcha_rand_str:"",userImage:"",beUserName:"",checked:!1,watchChecked:!1,watchShow:!1,payShowStatus:!0,haveDate:0,answerIsDate:0,platformDate:0,askingPrice:!0,payNum:[{name:"￥1",pay:1},{name:"￥2",pay:2},{name:"￥5",pay:5},{name:"￥10",pay:10},{name:"￥20",pay:20},{name:"￥50",pay:50},{name:"￥88",pay:88},{name:"￥128",pay:128},{name:this.i18n.t("discuzq.post.customize"),pay:0}],payNumCheck:[{name:"",pay:0}],freepercentage:[{name:"0%",pay:0},{name:"10%",pay:.1},{name:"30%",pay:.3},{name:"50%",pay:.5},{name:"70%",pay:.7},{name:"100%",pay:1}],freewords:[],percentagedisplay:"0%",uploadFile:[],cursor:0,wordCountCheck:[{name:this.i18n.t("discuzq.post.word",{num:0}),num:0}],word:0,setType:"pay",controlsStatus:!1,videoBeforeList:[],audioBeforeList:[],fullscreenStatus:!1,videoName:"",percent:0,fileId:"",url:"",postLoading:!1,allCategories:[],categoryIndex:"",categoryId:"",threadId:"",firstPostId:"",postDetails:{},filePreview:[],uploadStatus:!0,showHidden:!0,ticket:"",randstr:"",captchaResult:{},attachmentList:[],signatureVal:"",deleteType:"",deleteId:"",deleteIndex:"",deleteTip:"确定删除吗？",wechatTip:this.i18n.t("discuzq.wechatBind"),currentPosition:{},watchMoeny:"1",beAskId:"",payTypeText:"",orderSn:"",coverLoading:!1,payStatus:!1,payTypeData:[{name:"微信支付",icon:"icon-wxPay",color:"#09bb07",value:"0"},{name:"钱包支付",icon:"icon-walletPay",color:"#1878f3",value:"1"}],chooseType:1,payType:0,showPayType:"",ioshide:!1,isShowGoods:!0,dataGoodInfo:{},dataGoodInfoPrice:0,goodsId:"",categoryid:0,categoryindex:0,postShow:!1,popupStatus:!1,canUploadAttachment:!1}},computed:(0,r.default)((0,r.default)({},(0,s.mapState)({getAtMemberData:function(t){return t.atMember.atMemberData}})),{},{showPrice:function(){var t="";return this.priceAsk>0&&(t="￥".concat(this.priceAsk+this.i18n.t("discuzq.post.yuan"))),t},showAskPrice:function(){this.i18n.t("discuzq.post.free");return this.priceAsk<=0?this.i18n.t("discuzq.post.free"):"￥".concat(this.priceAsk+this.i18n.t("discuzq.post.yuan"))},currentLoginId:function(){var t=this.$store.getters["session/get"]("userId");return parseInt(t,10)}}),updated:function(){var t=this;this.geographical_location_show(),this.forums&&5===this.type&&(this.platformDate=(this.forums.set_site.site_onlooker_price*(this.forums.set_site.site_master_scale/10)).toFixed(2),this.haveDate=((this.forums.set_site.site_onlooker_price-this.platformDate)/2).toFixed(2),this.answerIsDate=(this.forums.set_site.site_onlooker_price-this.platformDate-this.haveDate).toFixed(2)),this.$nextTick((function(){t.$refs.textarea&&(t.$refs.textarea.$refs.textarea.style.overflowY="auto",t.$refs.textarea.$refs.textarea.style.paddingRight="10px")})),uni.$on("uploadVideoOver",(function(e){t.percent=1,e.doneResult&&(t.fileId=e.doneResult.fileId),e.result&&(t.fileId=e.result.fileId)}))},mounted:function(){this.onStartSave()},beforeDestroy:function(){this.save=!0,clearInterval(this.timer1),this.timer1=null,clearInterval(this.timer2),this.timer2=null},methods:(0,r.default)({geographical_location_show:function(){5===this.type&&this.forums.other.can_create_thread_question_position&&(this.geographical_location=!0),5===this.type&&this.forums.other.can_create_thread_question_anonymous&&(this.anonymity_show=!0)},isTimeReasonable:function(t){var e=t.split(" "),i=e[0].split("-"),a=e[1].split(":"),n=[].concat((0,o.default)(i),(0,o.default)(a)),r=parseInt(n[0],10),s=parseInt(n[1],10)-1,c=parseInt(n[2],10),u=parseInt(n[3],10),d=parseInt(n[4],10),p=parseInt(n[5],10);82800>=(new Date(r,s,c,u,d,p).getTime()-Date.now())/1e3?this.expired_time=!1:(this.expired_time=!0,s=(s=parseInt(s,10)+1)<10?"0".concat(s):s,c=c<10?"0".concat(c):c,u=u<10?"0".concat(u):u,d=d<10?"0".concat(d):d,this.timeValue="设置时间: ".concat(r,"-").concat(s,"-").concat(c," ").concat(u,":").concat(d))},echoMoneyAndTime:function(e){var i=this;this.$store.dispatch("jv/get",["threads/".concat(e),{}]).then((function(e){t.log(e),i.priceAsk=parseInt(e.questionTypeAndMoney.money,10),i.checked=e.isAnonymous,i.isTimeReasonable(e.questionTypeAndMoney.expired_at),i.expired_at=e.questionTypeAndMoney.expired_at}))},toDraftsing:function(){var e=this;if(this.textAreaValue.length<1&&this.price<1&&!this.expired_at)return this.$refs.toast.show({message:"草稿箱内容不能为空"}),!1;if(!this.categoryId)return this.$refs.toast.show({message:"分类不能为空"}),!1;this.save=!0,clearInterval(this.timer1),this.timer1=null,clearInterval(this.timer2),this.timer2=null;var i={_jv:{type:"threads",relationships:{category:{data:{type:"categories",id:this.two_categoryId||this.categoryId}},question:{data:{type:0,expired_at:this.expired_at,be_user_id:0,order_id:this.orderSn,price:this.priceAsk,is_onlooker:this.checked}}},links:{self:"threads?include=user,category,firstPost,firstPost.images,firstPost.postGoods,question,question.beUser,question.beUser.groups,question.images"}},content:this.textAreaValue,type:this.type,price:this.price,free_words:this.word,captcha_ticket:this.ticket,captcha_rand_str:this.randstr,is_anonymous:this.checked,is_red_packet:this.is_red_packet,is_draft:1,is_old_draft:0,id:this.currentId,redPacket:{rule:+this.rule,money:+this.money,number:+this.number,condition:+this.condition,likenum:+this.likenum}};1===this.payType?(i.attachment_price=this.price,i.price=""):0===this.payType&&(i.attachment_price="",i.price=this.price);var a=this.currentPosition;i.longitude=a.longitude||"",i.latitude=a.latitude||"",i.location=a.location||"",i.address=a.address||"",new Promise((function(t,a){switch(e.type){case 0:t();break;case 1:i.title=e.postTitle,i._jv.relationships.attachments={data:e.addImg().data.concat(e.addFile().data)},t();break;case 2:i.file_id=e.fileId,i.file_name=e.videoName,t();break;case 3:i._jv.relationships.attachments=e.addImg(),t();break;case 4:i.file_id=e.audioBeforeList[0].id,i.file_name=e.audioBeforeList[0].fileName,t();break;case 5:i._jv.relationships.attachments=e.addImg(),t();break;case 6:i.post_goods_id=e.dataGoodInfo._jv.id,t();break;default:a(),e.$refs.toast.show({message:e.i18n.t("core.postTypesDoNotMatch")})}})).then((function(){e.$store.dispatch("jv/post",i).then((function(t){e.currentId||(e.currentId=t._jv.id),e.$refs.toast.show({message:e.i18n.t("保存成功")})})).catch((function(e){t.log(e)}))}))},toDrafts:function(){var e=this;this.save=!0;var i={_jv:{type:"threads",relationships:{category:{data:{type:"categories",id:this.two_categoryId||this.categoryId}},question:{data:{type:0,expired_at:this.expired_at,be_user_id:0,order_id:this.orderSn,price:this.priceAsk,is_onlooker:this.checked}}},links:{self:"threads?include=user,category,firstPost,firstPost.images,firstPost.postGoods,question,question.beUser,question.beUser.groups,question.images"}},free_words:this.word,captcha_ticket:this.ticket,captcha_rand_str:this.randstr,is_draft:1,is_old_draft:0,id:this.currentId,price:0,attachment_price:"",title:"",type:5,content:this.textAreaValue,is_anonymous:this.checked,longitude:"",latitude:"",location:"",redPacket:{rule:+this.rule,money:+this.money,number:+this.number,condition:+this.condition,likenum:+this.likenum}};1===this.payType?(i.attachment_price=this.price,i.price=""):0===this.payType&&(i.attachment_price="",i.price=this.price);var a=this.currentPosition;i.longitude=a.longitude||"",i.latitude=a.latitude||"",i.location=a.location||"",i.address=a.address||"",new Promise((function(t,a){switch(e.type){case 0:t();break;case 1:i.title=e.postTitle,i._jv.relationships.attachments={data:e.addImg().data.concat(e.addFile().data)},t();break;case 2:i.file_id=e.fileId,i.file_name=e.videoName,t();break;case 3:i._jv.relationships.attachments=e.addImg(),t();break;case 4:i.file_id=e.audioBeforeList[0].id,i.file_name=e.audioBeforeList[0].fileName,t();break;case 5:i._jv.relationships.attachments=e.addImg(),t();break;case 6:i.post_goods_id=e.dataGoodInfo._jv.id,t();break;default:a(),e.$refs.toast.show({message:e.i18n.t("core.postTypesDoNotMatch")})}})).then((function(){e.$store.dispatch("jv/post",[i,{custom:{loading:!1}}]).then((function(t){e.save=!1,e.currentId||(e.currentId=t._jv.id)})).catch((function(e){t.log(e)}))}))},onStartSave:function(){var t=this;this.timer1=setInterval((function(){t.categoryId&&0!==t.textAreaValue.length&&(t.startSave(),clearInterval(t.timer1),t.timer1=null)}),12e4)},startSave:function(){var t=this;this.timer2=setInterval((function(){t.save||t.toDrafts()}),12e4)},setTimes:function(t){this.timeValue=t},getTimes:function(t,e){if(82800>=t)uni.showToast({title:"设置时间不能小于24小时",icon:"none"});else{uni.showToast({title:"设置时间成功",icon:"none"}),this.expired_time=!0;var i="".concat(e,":00");this.expired_at=i}},selectEndTime:function(){this.$refs.setEndTime.open()},focusEvent:function(){},addGoods:function(){"edit"===this.operating?uni.redirectTo({url:"/pages/topic/parse-goods?type=".concat(this.type,"&operating=edit&threadId=").concat(this.threadId)}):uni.redirectTo({url:"/pages/topic/parse-goods?type=".concat(this.type)})},deleteGoods:function(){this.dataGoodInfo=[],this.isShowGoods=!1},changeCheck:function(){},saveThread:function(){var t=this;uni.removeStorageSync("current_thread"),1===this.type&&(this.textAreaValue=this.vditor.getValue());var e={};if(["postTitle","price","word","fileId","videoName","textAreaValue","categoryIndex","categoryId","checkClassData","uploadFile","videoBeforeList","audioBeforeList","checked","watchChecked","askingPrice","watchShow","priceAsk","beAskId","userImage","beUserName","type","showHidden","payType","showPayType","ioshide","dataGoodInfo"].forEach((function(i){t[i]&&(e[i]=t[i])})),this.$refs.uploadFiles){var i=this.$refs.uploadFiles.getValue(),a=[];i.forEach((function(t){a.push({fileName:t.attributes.fileName,url:t.attributes.url,_jv:{id:t.id}})})),e.attachmentList=a}if(this.$refs.upload){var n=this.$refs.upload.getValue();n.forEach((function(t,e){t.attributes&&(n[e]={path:t.attributes.thumbUrl,id:t.id,order:t.attributes.order,name:t.attributes.fileName,url:t.attributes.url})})),e.imgList=n}uni.setStorageSync("current_thread",JSON.stringify(e))},choosePosition:function(){this.currentPosition.location||(this.saveThread(),this.getPosition())},clearPosition:function(){this.currentPosition={}},checkNum:function(t){var e=this,i=t.target.value,a=i.indexOf(".");i.indexOf(".")<0&&""!==i?i.length>6?(i=i.substring(0,i.length-1),uni.showToast({title:e.c.TheAmountCannotExceedOneMillion,icon:"none"})):i=parseFloat(i):0===i.indexOf(".")?i=(i=i.replace(/[^$#$]/g,"0.")).replace(/\.{2,}/g,"."):/^(\d?)+(\.\d{0,2})?$/.test(i)||(i=i.substring(0,i.length-1)),e.$nextTick((function(){e.maxLength=-1===a?7:10,e.inputPrice=i}))},fullscreenchange:function(t){this.fullscreenStatus=t.detail.fullScreen,t.detail.fullScreen||(this.controlsStatus=!1,this.videoContext.pause())},emojiclick:function(){this.emojiShow=!this.emojiShow,this.textShow=!this.textShow},contBlur:function(t){this.cursor=t.detail.cursor},diaLogClose:function(){this.$refs.popup.close(),this.popupStatus=!1,this.textShow=!0},diaLogOk:function(){var t="".concat(this.inputPrice);if(/^\d+(\.\d{1,2})?$/.test(t)){if(""===this.forums.set_site.site_minimum_amount){if(this.inputPrice<.1)return void uni.showToast({title:"悬赏金额不能少于0.1元",icon:"none"})}else if(this.inputPrice<this.forums.set_site.site_minimum_amount)return void uni.showToast({title:this.i18n.t("core.TheAmountCannotBeLessThanMinMoney")+this.forums.set_site.site_minimum_amount+this.i18n.t("discuzq.post.yuan"),icon:"none"});if(this.inputPrice>=1e4)uni.showToast({title:"悬赏金额应低于10000元",icon:"none"});else{if(5===this.type)return this.priceAsk=this.inputPrice,this.$refs.popup.close(),this.popupStatus=!1,this.textShow=!0,void this.postClick();"pay"===this.setType?this.price=this.inputPrice:this.word=this.inputWord,this.$refs.popup.close(),this.popupStatus=!1,this.textShow=!0}}else uni.showToast({title:"只能精确到小数点后两位",icon:"none"})},percentageClick:function(t){this.word=this.freepercentage[t].pay,this.percentagedisplay=this.freepercentage[t].name,this.setType="word",this.freewords=[],this.freewords.push(this.freepercentage[t]),this.$refs.popupBtm.close()},moneyClick:function(t){var e=this;this.choiceMoney=!0,this.setType="pay",this.payNumCheck=[],this.payNumCheck.push(this.payNum[t]),this.payNumCheck[0].name===this.i18n.t("discuzq.post.customize")?(this.textShow=!1,this.$refs.popupBtm.close(),this.popupStatus=!0,this.$nextTick((function(){e.inputPrice="",e.$refs.popup.open(),e.textShow=!1}))):(this.price=this.payNumCheck[0].pay,this.priceAsk=this.payNumCheck[0].pay,this.$refs.popupBtm.close(),this.postClick(),this.textShow=!0)},lookPay:function(){this.$refs.lookPayPopup.open()},cancelLookPay:function(){this.$refs.lookPayPopup.close()},choicePayType:function(t){this.payType=t,this.$refs.lookPayPopup.close()},cellClick:function(t){this.setType=t,this.$refs.popupBtm.open(),this.textShow=!1},postAnswerClick:function(){this.$refs.popupBtm.open(),this.textShow=!1},cancel:function(){this.$refs.popupBtm.close(),this.textShow=!0},uploadClick:function(t){this.uploadStatus=t},uploadChange:function(t,e){this.uploadFile=t,this.uploadStatus=e},uploadClear:function(t,e){var i=t.id;this.deleteType=0,this.deleteId=i,this.deleteIndex=e,this.$refs.deletePopup.open(),this.deleteTip=this.i18n.t("core.deleteImgSure")},audioDel:function(){this.deleteType=3,this.$refs.deletePopup.open(),this.deleteTip=this.i18n.t("core.deleteAudioSure")},getEmojiClick:function(t){var e;e="".concat(this.textAreaValue.slice(0,this.cursor)+t+this.textAreaValue.slice(this.cursor)),this.cursor=e.length,this.textAreaValue=e,this.emojiShow=!1,this.textShow=!0},callClick:function(){uni.navigateTo({url:"/pages/user/at-member"})},topicPage:function(){uni.navigateTo({url:"/pages/topic/topic"})},checkClass:function(t,e,i){this.two_categoryId="",this.checkClassData=[],+this.categoryId!=+i?(this.categoryId=i,this.checkClassData.push(t),this.secondallcategories=t.children||[]):this.categoryId=""},checkClassCh:function(t,e){this.isCateAxtive=e,this.SecondaryClassification=t.search_ids},checkClassing:function(t,e,i){+this.two_categoryId!=+i?this.two_categoryId=i:this.two_categoryId=""},payClickShow:function(){var t=this;if(this.$store.getters["session/get"]("isLogin")||(this.$store.dispatch("session/setUrl",this.curUrl),this.h5LoginMode()),this.payStatus=!1,this.forums.paycenter.wxpay_close){if(!this.forums.paycenter.wxpay_close||!this.forums.other.can_create_thread_paid)return this.ioshide=!1,void(this.payShowStatus=!1);this.ioshide=!0,this.payShowStatus=!0,this.payTypeText=this.t.pay+this.t.payAskingPrice,this.priceAsk=parseFloat(this.thread.price),this.$nextTick((function(){t.$refs.payShow.payClickShow(t.payTypeVal)}))}else this.payShowStatus=!1},setThread:function(){var t=this,e=uni.getStorageSync("current_thread");e&&(e=JSON.parse(e),this.dataGoodInfo=e.dataGoodInfo,Object.getOwnPropertyNames(e).forEach((function(i){if("imgList"===i){var a=e[i];a.forEach((function(t,e){a[e]={thumbUrl:t.path,_jv:{id:t.id},order:t.order,fileName:t.name,url:t.url}}));var n={firstPost:{images:[]}};n.firstPost.images=e[i],t.setAnnex("img",n)}else t[i]=e[i]})),this.videoBeforeList.length>0&&(this.percent=1),uni.removeStorageSync("current_thread"))},paysureShow:function(t){if(uni.setStorage({key:"page",data:"/topic/post?type=5&categoryId=".concat(this.categoryid,"&categoryIndex=").concat(this.categoryindex)}),0===t){if(!0===this.isWeixin&&void 0===this.user.wechat)return void this.$refs.wechatPopup.open();if(!0===this.isWeixin&&this.user.wechat&&""===this.user.wechat.mp_openid)return void this.$refs.wechatPopup.open();this.creatOrder(this.priceAsk,5,"",t)}},onInput:function(t){this.value=t,this.creatOrder(this.priceAsk,5,t,1)},creatOrder:function(e,i,a,n){var o=this,r={_jv:{type:"orders"},type:i,payee_id:this.$store.getters["session/get"]("userId"),amount:e,is_anonymous:this.checked?"0":"1"};this.$store.dispatch("jv/post",r).then((function(t){o.orderSn=t.order_sn,0===n?0===o.browser?o.orderPay(13,a,o.orderSn,n,"0"):o.isWeixin&&o.isPhone?o.orderPay(12,a,o.orderSn,n,"1"):o.isPhone?o.orderPay(20,a,o.orderSn,1,"2"):o.orderPay(10,a,o.orderSn,n,"3"):1===n&&o.orderPay(20,a,o.orderSn,n)})).catch((function(e){t.log(e)}))},orderPay:function(e,i,a,n,o){var r=this,s={};0===n?s={_jv:{type:"trade/pay/order/".concat(a)},payment_type:e}:1===n&&(s={_jv:{type:"trade/pay/order/".concat(a)},payment_type:e,pay_password:i}),this.$store.dispatch("jv/post",s).then((function(t){r.wxRes=t,0===n?"0"===o?r.wechatPay(t.wechat_js.timeStamp,t.wechat_js.nonceStr,t.wechat_js.package,t.wechat_js.signType,t.wechat_js.paySign):"1"===o?"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",r.onBridgeReady(t),!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",r.onBridgeReady(t)),document.attachEvent("onWeixinJSBridgeReady",r.onBridgeReady(t))):r.onBridgeReady(t):"2"===o?r.postThread().then((function(t){r.postLoading=!1,uni.hideLoading(),t&&t.isApproved,t&&t.Data&&t.Data.id&&uni.redirectTo({url:"/topic/index?id=".concat(t.Data.id)})})):"3"===o&&t&&(r.codeUrl=t.wechat_qrcode,r.payShowStatus=!1,r.$refs.codePopup.open(),r.qrcodeShow=!0,y=setInterval((function(){1!==r.payStatus?(r.getOrderStatus(r.orderSn,o),uni.hideLoading()):clearInterval(y)}),3e3)):1===n&&("success"===t.wallet_pay.result&&(r.$store.dispatch("jv/get",["users/".concat(r.currentLoginId),{}]),r.coverLoading=!1,r.postThread().then((function(t){r.postLoading=!1,uni.hideLoading(),t&&t.Data&&t.Data.id&&uni.redirectTo({url:"/topic/index?id=".concat(t.Data.id)})}))),r.coverLoading=!1)})).catch((function(e){t.log(e),r.$refs.payShow.clearPassword()}))},getOrderStatus:function(e,i){var a=this;this.$store.dispatch("jv/get",["orders/".concat(e),{custom:{loading:!1}}]).then((function(t){a.payStatus=t.status,1===a.payStatus&&("2"===i||("3"===i?(a.$refs.codePopup.close(),a.qrcodeShow=!1,a.postThread()):"0"===i?a.postThread().then((function(t){a.postLoading=!1,uni.hideLoading(),t&&1===t.isApproved&&a.$u.event.$emit("refreshHome",t),t&&t.Data&&t.Data.id&&uni.redirectTo({url:"/topic/index?id=".concat(t.Data.id)})})):"1"===i&&a.postThread().then((function(t){a.postLoading=!1,uni.hideLoading(),t&&1===t.isApproved&&a.$u.event.$emit("refreshHome",t),t&&t.Data&&t.Data.id&&uni.redirectTo({url:"/topic/index?id=".concat(t.Data.id)})}))),a.$refs.toast.show({message:a.i18n.t("pay.paySuccess")}))})).catch((function(e){t.log(e),a.coverLoading=!1,a.$refs.toast.show({message:a.i18n.t("pay.payFail")})}))},wechatPay:function(t,e,i,a,n){var o=this;uni.requestPayment({provider:"wxpay",timeStamp:t,nonceStr:e,package:i,signType:a,paySign:n,success:function(){o.coverLoading=!0,y=setInterval((function(){1!==o.payStatus?o.getOrderStatus(o.orderSn,"0"):clearInterval(y)}),3e3)},fail:function(){o.payShowStatus=!1,o.coverLoading=!1,o.$refs.toast.show({message:o.p.payFail})}})},onBridgeReady:function(t){var e=this;window.WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.wechat_js.appId,timeStamp:t.wechat_js.timeStamp,nonceStr:t.wechat_js.nonceStr,package:t.wechat_js.package,signType:"MD5",paySign:t.wechat_js.paySign},(function(t){"get_brand_wcpay_request:ok"===t.err_msg||("get_brand_wcpay_request:cancel"===t.err_msg||"get_brand_wcpay_request:fail"===t.err_msg)&&clearInterval(y)})),y=setInterval((function(){1!==e.payStatus?e.getOrderStatus(e.orderSn,"1"):clearInterval(y)}),3e3)},postClick:function(){var t=this;return this.priceAsk<.1?(this.$refs.toast.show({message:"悬赏金额不能为空"}),!1):this.choiceMoney?(this.choiceMoney=!1,!1):this.categoryId?this.textAreaValue.length<1?(this.$refs.toast.show({message:this.i18n.t("discuzq.post.theContentCanNotBeBlank")}),!1):this.expired_at?this.expired_time?(this.forums.qcloud.qcloud_captcha&&this.forums.other.create_thread_with_captcha&&(this.ticket&&this.randstr||(this.toTCaptcha(),this.payShowStatus=!0)),this.$nextTick((function(){t.$refs.payShow.payClickShow()})),!!this.orderSn&&(clearInterval(this.timer1),this.timer1=null,clearInterval(this.timer2),this.timer2=null,void this.postThread())):(this.$refs.toast.show({message:"设置时间不能小于24小时"}),!1):(this.$refs.toast.show({message:"悬赏结束时间不能为空"}),!1):(this.$refs.toast.show({message:this.i18n.t("discuzq.post.theclassifyCanNotBeBlank")}),!1)},setAnnex:function(t,e){var i=[];switch(t){case"img":e.firstPost.images.map((function(t){return i.push({path:t.thumbUrl,id:t._jv.id,order:t.order,name:t.fileName,url:t.url}),t})),this.filePreview=i;break;case"video":this.videoBeforeList.push({path:e.threadVideo.media_url});break;case"audio":this.audioBeforeList.push({fileName:e.threadAudio.file_name,url:e.threadAudio.media_url,id:e.threadAudio.file_id});break;case"goods":this.dataGoodInfo=e.firstPost.postGoods,-1!==e.firstPost.postGoods.price.indexOf("-")||Number(e.firstPost.postGoods.price)>0?this.dataGoodInfoPrice=e.firstPost.postGoods.price:Number(e.firstPost.postGoods.price)<=0&&(this.dataGoodInfoPrice="")}},addImg:function(){var t={data:[]};return this.uploadFile.forEach((function(e){e&&t.data.push({type:"attachments",id:e.id})})),t},addFile:function(){var t={data:[]};return this.$refs.uploadFiles.getValue().forEach((function(e){e.id&&t.data.push({type:"attachments",id:e.id})})),t},addQuestion:function(){return{data:{be_user_id:this.beAskId,price:this.priceAsk,is_onlooker:this.watchChecked,order_id:this.orderSn}}},deleteFile:function(t){this.deleteTip=this.i18n.t("core.deleteEnclosureSure"),this.$refs.deletePopup.open(),this.deleteType=1,this.deleteId=t},deleteFileSure:function(t){var e=this,i={_jv:{type:"attachments",id:t}};this.$store.dispatch("jv/delete",i).then((function(){e.$refs.uploadFiles.deleteSure()}))},getCategories:function(){var t=this;this.$store.dispatch("jv/get",["categories?filter[createThread]=1",{}]).then((function(e){t.allCategories=e,e.map((function(e){return e._jv&&Number(e._jv.id)===Number(t.categoryId)&&t.checkClassData.push(e),e}))}))},postThread:function(){var t,e=this;t=this.checkClassData[0]._jv.id;var i={categoriesId:Number(t),content:this.textAreaValue,type:5,isAnonymous:this.checked?1:0,price:0,freeWords:this.word,id:this.currentId,isDraft:0,isOldDraft:this.currentId?1:0,captchaTicket:this.ticket,captchaRandStr:this.randstr,attachmentPrice:"",title:"",longitude:"",latitude:"",location:"",question:{type:0,price:Number(this.priceAsk),orderId:this.orderSn,isOnlooker:this.checked,beUserId:0,expiredAt:this.expired_at},attachments:[]},a=this.currentPosition;return i.longitude=Number(a.longitude)||"",i.latitude=Number(a.latitude)||"",i.location=a.location||"",i.address=a.address||"",new Promise((function(t){e.addImg().data.forEach((function(t){i.attachments.push({id:Number(t.id),type:t.type})})),t()})).then((function(){return _.default.createThread({data:i}).then((function(t){return t}))}))},handleClickOk:function(){this.$refs.deletePopup.close(),0===this.deleteType?(this.delAttachments(this.deleteId,this.deleteIndex),this.$refs.upload.clear(this.deleteIndex)):2===this.deleteType?(this.videoBeforeList=[],this.percent=0):3===this.deleteType&&(this.audioBeforeList=[])},handleClickCancel:function(){this.$refs.deletePopup.close()},handleWechatClickOk:function(){this.isWeixin?this.wxh5Login(0,0):uni.showToast({icon:"none",title:this.i18n.t("user.unLogin"),duration:2e3})},handleWechatClickCancel:function(){this.$refs.wechatPopup.close()},delAttachments:function(t,e){if("edit"===this.operating){this.$u.event.$emit("deleteImg",{threadId:this.postDetails._jv.id,index:e});var i=this.$store.getters["jv/get"]("posts/".concat(this.postDetails.firstPost._jv.id));i.images.splice(e,1),i._jv.relationships.images.data.splice(e,1)}},getSignature:function(t){this.$store.dispatch("jv/get",["signature",{}]).then((function(e){t((function(){return e.signature}))}))},postVideo:function(t){var e={_jv:{type:"thread/video"},file_id:t,type:0};this.$store.dispatch("jv/post",e)},getPostThread:function(t){var e=this;this.$store.dispatch("jv/get",["threads/".concat(this.threadId),{params:{include:["firstPost","firstPost.images","threadVideo","threadAudio","category","firstPost.attachments","question","onlookers","question.beUser","question.images","firstPost.postGoods"]}}]).then((function(i){switch(i.question&&(e.beUserName=i.question.beUser.username,e.beAskId=i.question.beUser.id,e.userImage=i.question.beUser.avatarUrl),e.postDetails=i,e.firstPostId=i.firstPost._jv.id,e.type=i.type,1===e.type&&(e.markdownShow=!0),e.attachmentList=i.firstPost.attachments||[],e.textAreaValue=i.firstPost.content,e.categoryId=i.category._jv.id,e.checkClassData.push(i.category),i.threadVideo&&(e.fileId=i.threadVideo.file_id,e.percent=1),i.firstPost.images&&i.firstPost.images.forEach((function(t){t&&e.uploadFile.push({type:"attachments",id:t._jv.id,order:t.order,name:t.fileName,url:t.url,path:t.thumbUrl?t.thumbUrl:""})})),6===e.type&&i.firstPost.postGoods&&(e.dataGoodInfo=i.firstPost.postGoods,-1!==i.firstPost.postGoods.price.indexOf("-")||Number(i.firstPost.postGoods.price)>0?e.dataGoodInfoPrice=i.firstPost.postGoods.price:Number(i.firstPost.postGoods.price)<=0&&(e.dataGoodInfoPrice=""),e.isShowGoods=!0),e.loadStatus=!0,Number(i.price)>0?(e.price=i.price,e.word=i.freeWords,e.freepercentage.forEach((function(t){i.freeWords===t.pay&&(e.percentagedisplay=t.name)})),e.payType=2,e.showPayType=e.i18n.t("discuzq.post.TheContentAndTheAccessoriesIsPaid"),1===e.type&&(e.payNum[0].name="￥1",e.payNum[0].pay=1)):Number(i.attachmentPrice)>0?(e.price=i.attachmentPrice,e.payType=1,e.showPayType=e.i18n.t("discuzq.post.TheContentIsFreeAndTheAccessoriesArePaid"),e.payNum[0].name="￥1",e.payNum[0].pay=1):e.showPayType=e.i18n.t("discuzq.post.TheContentAndTheAccessoriesIsFree"),e.textAreaLength=1===e.type?49999:5e3,Number(i.type)){case 0:break;case 1:e.postTitle=i.title,e.setAnnex("img",i);break;case 2:e.percent=1,e.setAnnex("video",i);break;case 3:e.setAnnex("img",i);break;case 4:e.setAnnex("audio",i);break;case 5:e.setAnnex("img",i);break;case 6:e.setAnnex("goods",i)}if(t.name){var a={};a.location=t.name,a.address=t.addr,e.currentPosition=a}else e.currentPosition.longitude=i.longitude||"",e.currentPosition.latitude=i.latitude||"",e.currentPosition.location=i.location||"",e.currentPosition.address=i.address||"";"edit"===e.operating&&e.goodsId&&e.getGoodsInfo(),e.setThread()}))},getGoodsInfo:function(){var t=this;this.$store.dispatch("jv/get","goods/".concat(this.goodsId)).then((function(e){t.dataGoodInfo=e,-1!==e.price.indexOf("-")||Number(e.price)>0?t.dataGoodInfoPrice=e.price:Number(e.price)<=0&&(t.dataGoodInfoPrice=""),t.isShowGoods=!0}))},editThread:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var i,a,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0,a={_jv:{type:"posts",id:t.firstPostId,relationships:{},links:{self:"posts/".concat(t.firstPostId,"?include=user,thread,images")}},content:t.textAreaValue},n={_jv:{type:"threads",id:t.threadId,is_old_draft:1,relationships:{category:{data:{type:"categories",id:t.checkClassData[0]._jv.id}}}}},o=t.currentPosition,n.longitude=o.longitude||"",n.latitude=o.latitude||"",n.location=o.location||"",n.address=o.address||"",e.t0=t.type,e.next=0===e.t0?11:1===e.t0?12:2===e.t0?17:3===e.t0?21:4===e.t0?24:5===e.t0?28:6===e.t0?30:32;break;case 11:return e.abrupt("break",33);case 12:return n.title=t.postTitle,1===t.payType?(n.attachment_price=t.price,n.price=""):2===t.payType?(n.attachment_price="",n.price=t.price):0===t.payType&&(n.attachment_price="",n.price=""),n.free_words=t.word,a._jv.relationships.attachments={data:t.addImg().data.concat(t.addFile().data)},e.abrupt("break",33);case 17:return n.file_id=t.fileId,n.file_name=t.videoName,n.price=t.price,e.abrupt("break",33);case 21:return n.price=t.price,a._jv.relationships.attachments=t.addImg(),e.abrupt("break",33);case 24:return n.price=t.price,n.file_id=t.audioBeforeList[0].id,n.file_name=t.audioBeforeList[0].fileName,e.abrupt("break",33);case 28:return a._jv.relationships.attachments=t.addImg(),e.abrupt("break",33);case 30:return a.post_goods_id=t.dataGoodInfo._jv.id,e.abrupt("break",33);case 32:return e.abrupt("break",33);case 33:return e.next=35,t.$store.dispatch("jv/patch",a).then((function(t){return t._jv.json.data.id&&(i+=1),t._jv.json.data.attributes.isApproved,t}));case 35:return e.next=37,t.$store.dispatch("jv/patch",n).then((function(t){t._jv.json.data.id&&(i+=1)}));case 37:if(2!==i){e.next=39;break}return e.abrupt("return",i);case 39:throw new Error("出错了");case 40:case"end":return e.stop()}}),e)})))()},toTCaptcha:function(){var t=this;this.captcha=new window.TencentCaptcha(this.forums.qcloud.qcloud_captcha_app_id,(function(e){0===e.ret&&(t.ticket=e.ticket,t.randstr=e.randstr,t.postClick()),2===e.ret&&(t.postLoading=!1,t.payShowStatus=!1,uni.hideLoading())})),this.captcha.show()},changeAvatar:function(){uni.navigateTo({url:"/pages/user/at-member?name=select"})}},(0,s.mapMutations)({setAtMember:"atMember/SET_ATMEMBER"})),onLoad:function(t){var e=this;this.setThread(),t.threadId&&(this.currentId=t.threadId,this.echoMoneyAndTime(t.threadId)),t.type,this.categoryid=t.categoryId,this.categoryindex=t.categoryIndex,uni.$on("radioChange",(function(t){e.beUserName=t.username,e.beAskId=t.id,e.userImage=t.avatarUrl})),this.forums&&this.forums.other&&(this.canUploadAttachment=this.forums.other.can_upload_attachments),this.forums&&this.forums.paycenter&&("edit"!==t.operating&&this.forums.paycenter.wxpay_close?this.showPayType=this.i18n.t("discuzq.post.TheContentAndTheAccessoriesIsFree"):this.askingPrice=!1),t.type&&(this.type=Number(t.type));var i=h.default.isWeixin().isWeixin;this.isWeixin=i,this.isPhone=h.default.isWeixin().isPhone,!1===this.isWeixin&&(this.payTypeData[0].hide=!0),this.browser=1,1===this.type&&uni.$on("vditor",(function(t,i){e.vditor=t,e.vditor.setValue(e.textAreaValue),i.setPostComponent(e)})),this.url=c.DISCUZ_REQUEST_HOST;var a=uni.getStorageSync("access_token");if(this.header={authorization:"Bearer ".concat(a)},this.formData={type:1},this.getCategories(),t.operating&&(this.operating=t.operating),t.threadId&&(this.threadId=t.threadId),t.categoryIndex&&("0"===t.categoryIndex?this.categoryIndex="":this.categoryIndex=Number(t.categoryIndex)),t.categoryId&&(this.categoryId=0===Number(t.categoryId)?"":Number(t.categoryId)),this.textAreaLength=1===Number(t.type)?49999:5e3,"edit"===this.operating||"draft"===this.operating)this.loadStatus=!1,this.getPostThread(t);else if(this.loadStatus=!0,t.name&&t.latng){var n={};n.location=t.name,n.address=t.addr,this.currentPosition=n}try{uni.getSystemInfoSync();this.forums&&this.forums.paycenter.wxpay_close&&this.forums.other.can_create_thread_paid?(this.ioshide=!0,this.showHidden=!0):(this.ioshide=!1,this.showHidden=!1)}catch(t){}(1===this.type&&(this.markdownShow=!0),this.$u.event.$on("captchaResult",(function(t){e.ticket=t.ticket,e.randstr=t.randstr,e.postClick()})),this.$u.event.$on("closeChaReault",(function(){e.postLoading=!1,e.payShowStatus=!1,uni.hideLoading()})),uni.$on("clickTopic",(function(t){e.textAreaValue="".concat(e.textAreaValue.slice(0,e.cursor),"  #").concat(t.keywords.replace(/\s+/g,""),"#").concat(e.textAreaValue.slice(e.cursor),"  "),e.cursor=e.textAreaValue?e.textAreaValue.length:0})),6===this.type&&(this.goodsId=t.goodsId),(6===this.type&&"edit"!==t.operating&&""!==t.threadId&&this.goodsId||6===this.type&&this.goodsId)&&this.getGoodsInfo(),2===this.type||3===this.type)&&this.getOpenerEventChannel().on("acceptDataFromOpenerPage",(function(t){3===e.type&&(t.map((function(t){return e.uploadFile.push({type:"attachments",id:t.data.id,order:t.data.attributes.order,name:t.data.attributes.fileName,url:t.data.attributes.url,path:t.data.attributes.thumbUrl?t.data.attributes.thumbUrl:""}),e.filePreview.push({path:t.data.attributes.thumbUrl,id:t.data.id,order:t.data.attributes.order,name:t.data.attributes.fileName,url:t.data.attributes.url}),t})),e.addImg()),2===e.type&&t.data&&(t.data.doneResult?e.fileId=t.data.doneResult.fileId:e.fileId=t.data.result.fileId,e.videoBeforeList.push({path:t.data.uploadVideoRes.tempFilePath}),e.chooseType=0,e.percent=1)}))},onShow:function(){var t="";this.getAtMemberData.map((function(e){return t+="@".concat(e.username," ")})),this.textAreaValue="".concat(this.textAreaValue.slice(0,this.cursor)+t+this.textAreaValue.slice(this.cursor)),this.setAtMember([]),this.cursor=this.textAreaValue?this.textAreaValue.length:0,this.threadId},onReady:function(){this.videoContext=uni.createVideoContext("video")},onUnload:function(){this.$u.event.$off("captchaResult"),this.$u.event.$off("closeChaReault"),this.$u.event.$off("radioChange"),this.$u.event.$off("radioEditChange"),uni.$off("clickTopic"),uni.$off("clickImage"),uni.$off("clickAttach"),this.captcha&&this.captcha.destroy(),clearInterval(y),clearInterval(null),clearInterval(this.timer1),this.timer1=null,clearInterval(this.timer2),this.timer2=null,this.save=!0}};e.default=b}).call(this,i("5a52").default)},e047:function(t,e,i){"use strict";var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.readThreadDetail=function(){return c.apply(this,arguments)},i("96cf");var n=a(i("5530")),o=a(i("15fd")),r=a(i("1da1")),s={pid:{type:"number",required:!0},stopViewCount:{type:"boolean"}};function c(){return(c=(0,r.default)(regeneratorRuntime.mark((function t(){var e,i,a,r,c,u,d,p,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:{},t.prev=1,i=e.params,a=void 0===i?{}:i,r=e.data,c=void 0===r?{}:r,u=(0,o.default)(e,["params","data"]),d=(0,n.default)((0,n.default)({url:"/api/threads.detail.v2",method:"GET",params:a,data:c},u),{},{validateRules:s}),t.next=6,this.http(d);case 6:return p=t.sent,t.abrupt("return",p);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",t.t0);case 13:case"end":return t.stop()}}),t,this,[[1,10]])})))).apply(this,arguments)}},e972:function(t,e,i){t.exports=i.p+"static/img/msg-404.3ba2611f.svg"},f61d:function(t,e,i){"use strict";var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"RESPONSE_CODE",{enumerable:!0,get:function(){return o.RESPONSE_CODE}}),e.apiIns=void 0;var n=a(i("7fe0")),o=i("d1de"),r=i("79fc"),s=i("e047"),c=i("04fe"),u=i("2e6a"),d=i("4661"),p=i("7f23"),l=i("6670"),h=i("5458"),f=i("2df5");e.apiIns=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new n.default(t);return e.readThreadList=r.readThreadList,e.readThreadDetail=s.readThreadDetail,e.readCategories=c.readCategories,e.readCommentList=u.readCommentList,e.readStickList=d.readStickList,e.createThread=p.createThread,e.updateThreads=l.updateThreads,e.updatePosts=h.updatePosts,e.createPosts=f.createPosts,e}},f7de:function(t,e,i){"use strict";i.r(e);var a=i("dabc"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e.default=n.a}}]);